<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jan Seva Saathi – AI Powered Citizen Service Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Noto Sans', system-ui, sans-serif;
        }

        :root {
            --primary-blue: #1a365d;
            --secondary-blue: #2d4a8a;
            --accent-gold: #d4af37;
            --accent-light-gold: #f4e4b7;
            --govt-green: #2e7d32;
            --govt-green-light: #4caf50;
            --govt-red: #c62828;
            --govt-red-light: #ef5350;
            --govt-yellow: #f9a825;
            --light-gray: #f5f7fa;
            --medium-gray: #e0e6ed;
            --dark-gray: #4a5568;
            --text-dark: #2d3748;
            --text-light: #ffffff;
            --card-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
            --shadow-heavy: 0 12px 28px rgba(0, 0, 0, 0.15);
            --transition: all 0.3s ease;
        }

        [data-theme="dark"] {
            --primary-blue: #2d4a8a;
            --secondary-blue: #1a365d;
            --accent-gold: #e6c158;
            --accent-light-gold: #f4e4b7;
            --govt-green: #4caf50;
            --govt-green-light: #81c784;
            --govt-red: #ef5350;
            --govt-red-light: #e57373;
            --govt-yellow: #ffb74d;
            --light-gray: #1a1a2e;
            --medium-gray: #16213e;
            --dark-gray: #b0b0b0;
            --text-dark: #ffffff;
            --text-light: #ffffff;
            --card-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
            --shadow-heavy: 0 12px 28px rgba(0, 0, 0, 0.4);
        }

        body {
            background-color: var(--light-gray);
            color: var(--text-dark);
            line-height: 1.6;
            transition: background-color 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header / Navigation */
        .header {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            color: var(--text-light);
            padding: 15px 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
        }

        .logo {
            width: 50px;
            height: 50px;
            background: var(--accent-gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
        }

        .logo:hover {
            transform: rotate(15deg) scale(1.1);
        }

        .logo-text h1 {
            font-size: 22px;
            font-weight: 700;
        }

        .logo-text p {
            font-size: 12px;
            opacity: 0.9;
            margin-top: 3px;
        }

        .nav-menu {
            display: flex;
            gap: 25px;
            list-style: none;
        }

        .nav-menu li a {
            color: var(--text-light);
            text-decoration: none;
            font-weight: 500;
            padding: 8px 12px;
            border-radius: 5px;
            transition: var(--transition);
        }

        .nav-menu li a:hover,
        .nav-menu li a.active {
            background-color: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        /* Theme Toggle */
        .theme-toggle {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .theme-toggle:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(30deg);
        }

        .hamburger-menu {
            display: none;
            font-size: 24px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .hamburger-menu:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Hero Section - UPDATED for mobile */
        .hero-section {
            padding: 80px 0;
            background: linear-gradient(135deg, var(--light-gray) 0%, #e2e8f0 100%);
            position: relative;
            overflow: hidden;
            min-height: auto;
        }

        @media (max-width: 768px) {
            .hero-section {
                padding: 40px 0;
                min-height: auto;
                height: auto;
            }
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 80%, rgba(212, 175, 55, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(45, 74, 138, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .hero-content {
            display: flex;
            align-items: center;
            gap: 60px;
            position: relative;
            z-index: 1;
        }

        @media (max-width: 768px) {
            .hero-content {
                flex-direction: column;
                gap: 40px;
                text-align: center;
            }
        }

        .hero-text {
            flex: 1;
        }

        @media (max-width: 768px) {
            .hero-text {
                order: 1;
                width: 100%;
            }
        }

        .hero-text h2 {
            font-size: 48px;
            font-weight: 800;
            color: var(--primary-blue);
            margin-bottom: 20px;
            line-height: 1.2;
        }

        @media (max-width: 768px) {
            .hero-text h2 {
                font-size: 36px;
            }
        }

        @media (max-width: 480px) {
            .hero-text h2 {
                font-size: 28px;
            }
        }

        .hero-text p {
            font-size: 20px;
            color: var(--dark-gray);
            margin-bottom: 40px;
            max-width: 600px;
        }

        @media (max-width: 768px) {
            .hero-text p {
                font-size: 16px;
                margin-bottom: 30px;
                max-width: 100%;
            }
        }

        .hero-actions {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        @media (max-width: 768px) {
            .hero-actions {
                flex-direction: column;
                width: 100%;
                order: 2;
                margin-bottom: 40px;
            }
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-gold), #e6c158);
            color: var(--text-dark);
            border: none;
            padding: 18px 35px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: var(--transition);
            box-shadow: var(--card-shadow);
            position: relative;
            overflow: hidden;
        }

        @media (max-width: 768px) {
            .btn-primary {
                width: 100%;
                justify-content: center;
                padding: 16px 25px;
                font-size: 16px;
            }
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-heavy);
        }

        .btn-secondary {
            background: var(--secondary-blue);
            color: var(--text-light);
            border: none;
            padding: 18px 35px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: var(--transition);
            box-shadow: var(--card-shadow);
            position: relative;
            overflow: hidden;
        }

        @media (max-width: 768px) {
            .btn-secondary {
                width: 100%;
                justify-content: center;
                padding: 16px 25px;
                font-size: 16px;
            }
        }

        .btn-secondary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .btn-secondary:hover::before {
            left: 100%;
        }

        .btn-secondary:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-heavy);
        }

        .hero-visual {
            flex: 1;
            position: relative;
            height: 400px;
        }

        @media (max-width: 768px) {
            .hero-visual {
                width: 100%;
                height: 400px;
                order: 3;
                position: static;
                margin-top: 30px;
            }
        }

        .phone-mockup {
            position: absolute;
            width: 280px;
            height: 500px;
            background: #1a1a1a;
            border-radius: 40px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            border: 10px solid #333;
            right: 0;
            top: -50px;
            transform-origin: center;
            animation: float 6s ease-in-out infinite;
        }

        @media (max-width: 768px) {
            .phone-mockup {
                position: relative;
                right: auto;
                top: auto;
                margin: 0 auto;
                width: 250px;
                height: 450px;
                animation: float 6s ease-in-out infinite;
            }
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-20px);
            }
        }

        .phone-screen {
            width: 100%;
            height: 100%;
            background: #f0f2f5;
            padding: 20px;
            overflow-y: auto;
        }

        .chat-bubble {
            background: var(--secondary-blue);
            color: white;
            padding: 12px 16px;
            border-radius: 18px;
            max-width: 80%;
            margin-bottom: 15px;
            font-size: 14px;
            animation: slideIn 0.3s ease;
            position: relative;
        }

        .chat-bubble.user {
            background: var(--govt-green);
            margin-left: auto;
            animation: slideInRight 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(20px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .token-visual {
            position: absolute;
            bottom: 40px;
            left: 0;
            width: 300px;
            background: var(--light-gray);
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--shadow-heavy);
            border: 2px solid var(--accent-gold);
            animation: tokenGlow 2s ease-in-out infinite alternate;
        }

        @media (max-width: 768px) {
            .token-visual {
                position: relative;
                bottom: auto;
                left: auto;
                width: 100%;
                max-width: 400px;
                margin: 30px auto 0;
                order: 4;
                animation: tokenGlow 2s ease-in-out infinite alternate;
            }
        }

        @keyframes tokenGlow {
            from {
                box-shadow: 0 12px 28px rgba(0, 0, 0, 0.15);
            }

            to {
                box-shadow: 0 12px 28px rgba(212, 175, 55, 0.3);
            }
        }

        .token-visual h4 {
            color: var(--primary-blue);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .token-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .token-detail-item {
            font-size: 14px;
        }

        .token-detail-item .label {
            font-weight: 600;
            color: var(--dark-gray);
        }

        /* How It Works Section */
        .how-it-works {
            padding: 80px 0;
            background: var(--light-gray);
        }

        @media (max-width: 768px) {
            .how-it-works {
                padding: 60px 0;
            }
        }

        .section-title {
            text-align: center;
            font-size: 36px;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 60px;
            position: relative;
        }

        @media (max-width: 768px) {
            .section-title {
                font-size: 28px;
                margin-bottom: 40px;
            }
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: var(--accent-gold);
            border-radius: 2px;
        }

        .steps-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            position: relative;
        }

        @media (max-width: 768px) {
            .steps-container {
                grid-template-columns: 1fr;
                gap: 30px;
            }
        }

        .step-card {
            background: var(--light-gray);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            text-align: center;
            border-top: 5px solid var(--accent-gold);
            position: relative;
            overflow: hidden;
        }

        .step-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent 0%, rgba(212, 175, 55, 0.05) 100%);
            opacity: 0;
            transition: var(--transition);
        }

        .step-card:hover::before {
            opacity: 1;
        }

        .step-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: var(--shadow-heavy);
        }

        .step-number {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
            background: var(--accent-gold);
            color: var(--text-dark);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .step-icon {
            font-size: 48px;
            margin-bottom: 20px;
            color: var(--secondary-blue);
            transition: var(--transition);
        }

        .step-card:hover .step-icon {
            transform: scale(1.1) rotate(5deg);
        }

        .step-card h3 {
            font-size: 22px;
            margin-bottom: 15px;
            color: var(--primary-blue);
        }

        .step-card p {
            color: var(--dark-gray);
            margin-bottom: 20px;
        }

        .flow-arrow {
            position: absolute;
            top: 50%;
            right: -30px;
            font-size: 40px;
            color: var(--accent-gold);
            transform: translateY(-50%);
            animation: arrowBounce 2s infinite;
        }

        @media (max-width: 1024px) {
            .flow-arrow {
                display: none;
            }
        }

        @keyframes arrowBounce {

            0%,
            100% {
                transform: translateY(-50%) translateX(0);
            }

            50% {
                transform: translateY(-50%) translateX(10px);
            }
        }

        /* Problems Section */
        .problems-section {
            padding: 80px 0;
            background: linear-gradient(135deg, var(--light-gray) 0%, #e2e8f0 100%);
        }

        @media (max-width: 768px) {
            .problems-section {
                padding: 60px 0;
            }
        }

        .problems-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
        }

        @media (max-width: 768px) {
            .problems-grid {
                grid-template-columns: 1fr;
            }
        }

        .problem-card {
            background: var(--light-gray);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            display: flex;
            gap: 20px;
            align-items: flex-start;
            border-left: 5px solid var(--govt-red);
            position: relative;
            overflow: hidden;
        }

        .problem-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: var(--govt-red);
            transition: var(--transition);
        }

        .problem-card:hover {
            transform: translateY(-5px) translateX(5px);
            box-shadow: var(--shadow-heavy);
        }

        .problem-card:hover::before {
            width: 10px;
        }

        .problem-icon {
            font-size: 36px;
            color: var(--govt-red);
            flex-shrink: 0;
            transition: var(--transition);
        }

        .problem-card:hover .problem-icon {
            transform: scale(1.1);
        }

        .problem-text h3 {
            font-size: 20px;
            margin-bottom: 10px;
            color: var(--primary-blue);
        }

        /* Key Features Section - UPDATED for working navigation */
        .key-features-section {
            padding: 80px 0;
            background: var(--light-gray);
        }

        @media (max-width: 768px) {
            .key-features-section {
                padding: 60px 0;
            }
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
        }

        @media (max-width: 1024px) {
            .features-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .features-grid {
                grid-template-columns: 1fr;
            }
        }

        .feature-card {
            background: var(--light-gray);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            text-align: center;
            border-top: 5px solid var(--secondary-blue);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent 0%, rgba(45, 74, 138, 0.05) 100%);
            opacity: 0;
            transition: var(--transition);
        }

        .feature-card:hover::before {
            opacity: 1;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-heavy);
        }

        .feature-icon {
            font-size: 48px;
            margin-bottom: 20px;
            color: var(--secondary-blue);
            transition: var(--transition);
        }

        .feature-card:hover .feature-icon {
            transform: scale(1.1) rotate(5deg);
        }

        .feature-card h3 {
            font-size: 22px;
            color: var(--primary-blue);
            margin-bottom: 15px;
        }

        .feature-card p {
            color: var(--dark-gray);
            margin-bottom: 20px;
            font-size: 16px;
            line-height: 1.5;
        }

        .feature-btn {
            background: var(--secondary-blue);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: var(--transition);
            width: 100%;
        }

        .feature-btn:hover {
            background: #1a365d;
            transform: translateY(-2px);
        }

        /* AI Assistant Page - UPDATED Layout */
        .page-container {
            padding: 40px 0;
            min-height: calc(100vh - 80px);
        }

        .page-title {
            font-size: 36px;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        @media (max-width: 768px) {
            .page-title {
                font-size: 28px;
            }
        }

        /* NEW: AI Container with Two Columns */
        .ai-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 60px;
        }

        @media (max-width: 768px) {
            .ai-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }

        .ai-input-panel {
            background: var(--light-gray);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            position: relative;
            overflow: hidden;
            height: fit-content;
        }

        .ai-input-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--accent-gold), var(--secondary-blue));
        }

        .ai-input-title {
            font-size: 24px;
            margin-bottom: 20px;
            color: var(--primary-blue);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Voice Input Button */
        .voice-input-btn {
            width: 100%;
            background: linear-gradient(135deg, var(--govt-green), var(--govt-green-light));
            color: white;
            border: none;
            padding: 25px;
            border-radius: 15px;
            font-size: 20px;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .voice-input-btn:hover {
            transform: scale(1.02);
            box-shadow: var(--shadow-heavy);
        }

        .voice-input-btn.listening {
            background: linear-gradient(135deg, var(--govt-red), var(--govt-red-light));
            animation: pulse 1.5s infinite;
        }

        .voice-input-btn.processing {
            background: linear-gradient(135deg, #f9a825, #ffb74d);
        }

        .voice-input-btn.success {
            background: linear-gradient(135deg, #2e7d32, #4caf50);
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(239, 83, 80, 0.7);
            }

            70% {
                box-shadow: 0 0 0 20px rgba(239, 83, 80, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(239, 83, 80, 0);
            }
        }

        .voice-wave {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.3;
            display: none;
        }

        .voice-wave.active {
            display: block;
            background: repeating-linear-gradient(90deg,
                    transparent,
                    rgba(255, 255, 255, 0.3) 10px,
                    transparent 20px);
            animation: waveMove 1s linear infinite;
        }

        @keyframes waveMove {
            from {
                background-position: 0 0;
            }

            to {
                background-position: 20px 0;
            }
        }

        .text-input-area {
            width: 100%;
            height: 150px;
            padding: 20px;
            border: 2px solid var(--medium-gray);
            border-radius: 10px;
            font-size: 18px;
            resize: none;
            margin-bottom: 20px;
            font-family: inherit;
            background: var(--light-gray);
            color: var(--text-dark);
            transition: var(--transition);
        }

        .text-input-area:focus {
            outline: none;
            border-color: var(--accent-gold);
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
        }

        .input-actions {
            display: flex;
            gap: 15px;
        }

        @media (max-width: 768px) {
            .input-actions {
                flex-direction: column;
            }
        }

        .btn-action {
            flex: 1;
            padding: 15px;
            border-radius: 10px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
        }

        .btn-action::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .btn-action:hover::before {
            left: 100%;
        }

        .btn-speak {
            background: var(--secondary-blue);
            color: white;
        }

        .btn-speak:hover {
            background: #1a365d;
            transform: translateY(-3px);
        }

        .btn-send {
            background: var(--accent-gold);
            color: var(--text-dark);
        }

        .btn-send:hover {
            background: #c9a03d;
            transform: translateY(-3px);
        }

        /* Auto Read Toggle */
        .auto-read-toggle {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 25px;
            padding-top: 25px;
            border-top: 1px solid var(--medium-gray);
        }

        .toggle-label {
            font-weight: 600;
            color: var(--dark-gray);
            font-size: 16px;
        }

        /* NEW: AI Response Panel (Primary Panel) */
        .ai-response-panel {
            background: var(--light-gray);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            position: relative;
            overflow: hidden;
            border-left: 5px solid var(--accent-gold);
            display: flex;
            flex-direction: column;
            height: fit-content;
        }

        .ai-response-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(to bottom, var(--accent-gold), var(--secondary-blue));
        }

        .ai-response-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            color: var(--primary-blue);
        }

        .ai-response-header h3 {
            font-size: 22px;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ai-response-content {
            flex: 1;
            max-height: 400px;
            overflow-y: auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 10px;
            margin-bottom: 25px;
            line-height: 1.6;
            font-size: 16px;
            color: var(--text-dark);
            border: 1px solid var(--medium-gray);
            min-height: 200px;
        }

        .ai-response-content p {
            margin-bottom: 15px;
        }

        .ai-response-content ul,
        .ai-response-content ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .ai-response-content li {
            margin-bottom: 8px;
        }

        /* Reading Controls in AI Response Panel */
        .reading-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px;
            background: rgba(45, 74, 138, 0.1);
            border-radius: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        @media (max-width: 768px) {
            .reading-controls {
                flex-direction: column;
                align-items: stretch;
                gap: 15px;
            }
        }

        .reading-controls h4 {
            color: var(--secondary-blue);
            margin: 0;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .reading-buttons {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .reading-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: var(--secondary-blue);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .reading-btn:hover {
            background: var(--primary-blue);
            transform: scale(1.1);
        }

        .reading-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .reading-btn.playing {
            background: var(--govt-green);
        }

        .reading-btn.paused {
            background: var(--govt-yellow);
        }

        .reading-status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: var(--dark-gray);
            margin-left: auto;
        }

        @media (max-width: 768px) {
            .reading-status {
                margin-left: 0;
                justify-content: center;
            }
        }

        .reading-progress {
            flex: 1;
            height: 4px;
            background: var(--medium-gray);
            border-radius: 2px;
            overflow: hidden;
            max-width: 200px;
        }

        .reading-progress-bar {
            height: 100%;
            background: var(--accent-gold);
            width: 0%;
            transition: width 0.3s ease;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .volume-slider {
            width: 80px;
            height: 4px;
            background: var(--medium-gray);
            border-radius: 2px;
            outline: none;
            -webkit-appearance: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--secondary-blue);
            cursor: pointer;
        }

        /* AI Application Cards (Below AI Container) */
        .ai-application-cards {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 40px;
        }

        @media (max-width: 768px) {
            .ai-application-cards {
                grid-template-columns: 1fr;
            }
        }

        .ai-response-card {
            background: var(--light-gray);
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--medium-gray);
            position: relative;
            transition: var(--transition);
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.5s ease forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .response-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            font-size: 18px;
            font-weight: 600;
        }

        .response-header.online {
            color: var(--govt-green);
        }

        .response-header.offline {
            color: var(--govt-red);
        }

        /* Speak Button on Response Card */
        .response-speak-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--secondary-blue);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .response-speak-btn:hover {
            background: #1a365d;
            transform: scale(1.1);
        }

        .response-speak-btn.speaking {
            background: var(--govt-red);
            animation: speakPulse 1s infinite;
        }

        @keyframes speakPulse {
            0% {
                box-shadow: 0 0 0 0 rgba(41, 128, 185, 0.7);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(41, 128, 185, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(41, 128, 185, 0);
            }
        }

        .ai-badge {
            display: inline-block;
            background: #e8f5e9;
            color: #2e7d32;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            margin-left: 10px;
            font-weight: 600;
        }

        .steps-list {
            margin-left: 20px;
            margin-bottom: 20px;
        }

        .steps-list li {
            margin-bottom: 8px;
            position: relative;
        }

        .steps-list li::before {
            content: '✓';
            position: absolute;
            left: -20px;
            color: var(--govt-green);
            font-weight: bold;
        }

        .documents-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .doc-tag {
            background: #e8f5e9;
            color: var(--govt-green);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            transition: var(--transition);
        }

        .doc-tag:hover {
            transform: translateY(-2px);
        }

        .doc-tag.offline {
            background: #ffebee;
            color: var(--govt-red);
        }

        .response-actions {
            display: flex;
            gap: 15px;
        }

        @media (max-width: 768px) {
            .response-actions {
                flex-direction: column;
            }
        }

        /* Smart Token Page */
        .token-generator-section {
            padding: 60px 0 40px 0;
        }

        @media (max-width: 768px) {
            .token-generator-section {
                padding: 40px 0 20px 0;
            }
        }

        .token-generator-card {
            background: var(--light-gray);
            border-radius: 15px;
            padding: 40px;
            box-shadow: var(--shadow-heavy);
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
        }

        @media (max-width: 768px) {
            .token-generator-card {
                padding: 25px;
            }
        }

        .token-generator-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--accent-gold), var(--govt-green));
        }

        .token-generator-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 10px;
            text-align: center;
        }

        @media (max-width: 768px) {
            .token-generator-title {
                font-size: 24px;
            }
        }

        .token-generator-subtitle {
            font-size: 16px;
            color: var(--dark-gray);
            text-align: center;
            margin-bottom: 30px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .token-form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .token-form-grid {
                grid-template-columns: 1fr;
            }
        }

        .form-group-full {
            grid-column: span 2;
        }

        @media (max-width: 768px) {
            .form-group-full {
                grid-column: span 1;
            }
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-gray);
            font-size: 14px;
        }

        .form-select,
        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid var(--medium-gray);
            border-radius: 8px;
            font-size: 16px;
            background: var(--light-gray);
            color: var(--text-dark);
            transition: var(--transition);
        }

        .form-select:focus,
        .form-input:focus {
            outline: none;
            border-color: var(--accent-gold);
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
        }

        .form-select option {
            background: var(--light-gray);
            color: var(--text-dark);
        }

        .token-generate-btn {
            background: linear-gradient(135deg, var(--govt-green), var(--govt-green-light));
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            display: block;
            margin: 30px auto 0;
            transition: var(--transition);
            box-shadow: var(--card-shadow);
            position: relative;
            overflow: hidden;
        }

        .token-generate-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-heavy);
        }

        .token-generate-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .token-generate-btn:hover::before {
            left: 100%;
        }

        /* Token System Page - LANDSCAPE TOKEN CARD */
        .token-hero {
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            color: white;
            padding: 60px 0;
            border-radius: 0 0 20px 20px;
            margin-bottom: 0;
            position: relative;
            overflow: hidden;
        }

        .token-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,0 L100,100 Z" fill="rgba(255,255,255,0.1)"/></svg>');
            background-size: cover;
        }

        .token-hero-content {
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .token-hero h1 {
            font-size: 42px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .token-hero h1 {
                font-size: 32px;
            }
        }

        .token-hero p {
            font-size: 20px;
            max-width: 700px;
            margin: 0 auto 30px;
            opacity: 0.9;
        }

        @media (max-width: 768px) {
            .token-hero p {
                font-size: 16px;
            }
        }

        /* LANDSCAPE TOKEN CARD */
        .token-card-container {
            max-width: 900px;
            margin: 60px auto;
        }

        @media (max-width: 768px) {
            .token-card-container {
                margin: 40px auto;
            }
        }

        .token-card-landscape {
            background: var(--light-gray);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow-heavy);
            border: 3px solid var(--accent-gold);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 100%;
        }

        .token-card-landscape:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 8px;
            background: linear-gradient(90deg, var(--accent-gold), var(--secondary-blue));
        }

        /* Top Row */
        .token-row-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--medium-gray);
            flex-wrap: wrap;
            gap: 15px;
        }

        @media (max-width: 768px) {
            .token-row-top {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
        }

        .token-number-landscape {
            font-size: 32px;
            font-weight: 800;
            color: var(--primary-blue);
            letter-spacing: 2px;
            font-family: monospace;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        @media (max-width: 768px) {
            .token-number-landscape {
                font-size: 28px;
            }
        }

        .token-number-landscape i {
            color: var(--accent-gold);
            font-size: 28px;
        }

        .service-type-landscape {
            font-size: 20px;
            font-weight: 700;
            color: var(--secondary-blue);
            background: rgba(45, 74, 138, 0.1);
            padding: 8px 16px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        @media (max-width: 768px) {
            .service-type-landscape {
                font-size: 18px;
                width: 100%;
                justify-content: center;
            }
        }

        .crowd-status-landscape {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            font-size: 18px;
        }

        .crowd-status-landscape.low {
            color: var(--govt-green);
        }

        .crowd-status-landscape.medium {
            color: var(--govt-yellow);
        }

        .crowd-status-landscape.high {
            color: var(--govt-red);
        }

        /* Middle Row */
        .token-row-middle {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--medium-gray);
        }

        @media (max-width: 768px) {
            .token-row-middle {
                grid-template-columns: 1fr;
                gap: 15px;
            }
        }

        .office-info-landscape,
        .date-info-landscape,
        .time-info-landscape {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .info-label {
            font-weight: 600;
            color: var(--dark-gray);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-value {
            font-size: 18px;
            font-weight: 700;
            color: var(--primary-blue);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Bottom Row */
        .token-row-bottom {
            display: grid;
            grid-template-columns: 1fr 1fr 2fr;
            gap: 20px;
            align-items: start;
        }

        @media (max-width: 768px) {
            .token-row-bottom {
                grid-template-columns: 1fr;
                gap: 15px;
            }
        }

        .wait-time-landscape,
        .validity-landscape {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .instructions-landscape {
            background: rgba(212, 175, 55, 0.1);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid var(--accent-gold);
        }

        .instructions-landscape h4 {
            color: var(--primary-blue);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 16px;
        }

        .instructions-list {
            list-style: none;
            padding: 0;
            margin: 0;
            font-size: 14px;
        }

        .instructions-list li {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        .instructions-list li::before {
            content: '→';
            position: absolute;
            left: 0;
            color: var(--accent-gold);
            font-weight: bold;
        }

        /* Token Actions */
        .token-actions-landscape {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid var(--medium-gray);
        }

        @media (max-width: 768px) {
            .token-actions-landscape {
                flex-direction: column;
            }
        }

        .btn-download-token,
        .btn-save-token {
            flex: 1;
            padding: 15px 25px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: var(--transition);
            border: none;
        }

        .btn-download-token {
            background: linear-gradient(135deg, var(--secondary-blue), #1a365d);
            color: white;
        }

        .btn-download-token:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-heavy);
        }

        .btn-save-token {
            background: linear-gradient(135deg, var(--govt-green), var(--govt-green-light));
            color: white;
        }

        .btn-save-token:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-heavy);
        }

        /* Active Tokens Section */
        .active-tokens-section {
            margin-top: 60px;
            padding-top: 40px;
            border-top: 2px solid var(--medium-gray);
        }

        .active-tokens-title {
            font-size: 28px;
            color: var(--primary-blue);
            margin-bottom: 30px;
            text-align: center;
        }

        .active-tokens-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: 25px;
        }

        @media (max-width: 768px) {
            .active-tokens-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Process Guide Page */
        .process-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--medium-gray);
            padding-bottom: 10px;
            flex-wrap: wrap;
        }

        @media (max-width: 768px) {
            .process-tabs {
                flex-direction: column;
            }
        }

        .process-tab {
            padding: 12px 24px;
            background: var(--light-gray);
            border: 2px solid var(--medium-gray);
            border-radius: 8px 8px 0 0;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            color: var(--dark-gray);
            position: relative;
            overflow: hidden;
        }

        @media (max-width: 768px) {
            .process-tab {
                width: 100%;
                text-align: center;
                border-radius: 8px;
                margin-bottom: 5px;
            }
        }

        .process-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.2), transparent);
            transition: 0.5s;
        }

        .process-tab:hover::before {
            left: 100%;
        }

        .process-tab.active {
            background: var(--primary-blue);
            color: white;
            border-color: var(--primary-blue);
        }

        .process-tab:hover:not(.active) {
            background: rgba(45, 74, 138, 0.1);
            transform: translateY(-2px);
        }

        .process-content {
            background: var(--light-gray);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }

        .process-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(to bottom, var(--accent-gold), var(--secondary-blue));
        }

        .process-tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .process-tab-content.active {
            display: block;
        }

        .process-step {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            padding-bottom: 25px;
            border-bottom: 1px solid var(--medium-gray);
            align-items: flex-start;
        }

        .process-step:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .step-number-circle {
            width: 40px;
            height: 40px;
            background: var(--accent-gold);
            color: var(--text-dark);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 18px;
            flex-shrink: 0;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: var(--transition);
        }

        .process-step:hover .step-number-circle {
            transform: scale(1.1) rotate(10deg);
        }

        .step-details h4 {
            color: var(--primary-blue);
            margin-bottom: 8px;
        }

        .step-duration {
            display: inline-block;
            background: rgba(45, 74, 138, 0.1);
            color: var(--secondary-blue);
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-top: 8px;
        }

        /* Schemes Page */
        .eligibility-checker {
            background: var(--light-gray);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }

        .eligibility-checker::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--govt-green), var(--accent-gold));
        }

        .eligibility-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .eligibility-form {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        @media (max-width: 1024px) {
            .eligibility-form {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .eligibility-form {
                grid-template-columns: 1fr;
            }
        }

        .form-group {
            margin-bottom: 15px;
        }

        .eligible-schemes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
            animation: fadeIn 0.5s ease;
        }

        .eligible-scheme-card {
            background: var(--light-gray);
            border-radius: 10px;
            padding: 20px;
            box-shadow: var(--card-shadow);
            border-left: 4px solid var(--govt-green);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .eligible-scheme-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-heavy);
        }

        .eligible-scheme-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent 0%, rgba(46, 125, 50, 0.05) 100%);
            opacity: 0;
            transition: var(--transition);
        }

        .eligible-scheme-card:hover::before {
            opacity: 1;
        }

        .match-percentage {
            display: inline-block;
            background: linear-gradient(135deg, #2e7d32, #4caf50);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .match-high {
            background: linear-gradient(135deg, #2e7d32, #4caf50);
        }

        .match-medium {
            background: linear-gradient(135deg, #f9a825, #ffb74d);
        }

        .match-low {
            background: linear-gradient(135deg, #c62828, #ef5350);
        }

        .schemes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }

        @media (max-width: 768px) {
            .schemes-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }

        .scheme-category-card {
            background: var(--light-gray);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            text-align: center;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .scheme-category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, transparent 0%, rgba(45, 74, 138, 0.05) 100%);
            opacity: 0;
            transition: var(--transition);
        }

        .scheme-category-card:hover::before {
            opacity: 1;
        }

        .scheme-category-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-heavy);
        }

        .scheme-icon {
            font-size: 48px;
            margin-bottom: 20px;
            color: var(--secondary-blue);
            transition: var(--transition);
        }

        .scheme-category-card:hover .scheme-icon {
            transform: scale(1.1) rotate(5deg);
        }

        .scheme-category-card h3 {
            font-size: 22px;
            color: var(--primary-blue);
            margin-bottom: 10px;
        }

        /* Scheme Detail Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: var(--light-gray);
            border-radius: 15px;
            padding: 30px;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border-top: 5px solid var(--secondary-blue);
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Language & Accessibility Page */
        .accessibility-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }

        .accessibility-card {
            background: var(--light-gray);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .accessibility-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--secondary-blue), var(--accent-gold));
        }

        .accessibility-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-heavy);
        }

        .accessibility-card h3 {
            color: var(--primary-blue);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .language-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .language-option {
            padding: 15px;
            border: 2px solid var(--medium-gray);
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 15px;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .language-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.1), transparent);
            transition: 0.5s;
        }

        .language-option:hover::before {
            left: 100%;
        }

        .language-option:hover {
            border-color: var(--accent-gold);
            background: rgba(212, 175, 55, 0.05);
            transform: translateX(5px);
        }

        .language-option.active {
            border-color: var(--accent-gold);
            background: rgba(212, 175, 55, 0.1);
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked+.slider {
            background-color: var(--govt-green);
        }

        input:checked+.slider:before {
            transform: translateX(30px);
        }

        /* Notification Toast */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--govt-green);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: var(--shadow-heavy);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 10000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.error {
            background: var(--govt-red);
        }

        .toast.warning {
            background: var(--govt-yellow);
            color: var(--text-dark);
        }

        /* Loading Spinner */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, .3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Footer */
        .footer {
            background: var(--primary-blue);
            color: white;
            padding: 60px 0 30px;
            margin-top: 80px;
            position: relative;
            overflow: hidden;
        }

        .footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, var(--accent-gold), var(--secondary-blue));
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 40px;
            margin-bottom: 40px;
        }

        @media (max-width: 1024px) {
            .footer-content {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .footer-content {
                grid-template-columns: 1fr;
            }
        }

        .footer-column h4 {
            font-size: 18px;
            margin-bottom: 20px;
            color: var(--accent-light-gold);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 12px;
        }

        .footer-links a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: var(--transition);
            display: inline-block;
        }

        .footer-links a:hover {
            color: var(--accent-gold);
            transform: translateX(5px);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
        }

        /* Mobile Responsiveness */
        @media (max-width: 1024px) {
            .hero-content {
                flex-direction: column;
                text-align: center;
            }

            .hero-visual {
                width: 100%;
                height: 400px;
            }

            .phone-mockup {
                right: 50%;
                transform: translateX(50%);
            }

            .token-visual {
                left: 50%;
                transform: translateX(-50%);
            }

            .steps-container {
                grid-template-columns: 1fr;
            }

            .flow-arrow {
                display: none;
            }

            .problems-grid {
                grid-template-columns: 1fr;
            }

            .features-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .ai-container {
                grid-template-columns: 1fr;
            }

            .eligibility-form {
                grid-template-columns: 1fr 1fr;
            }

            .footer-content {
                grid-template-columns: repeat(2, 1fr);
            }

            .token-form-grid {
                grid-template-columns: 1fr;
            }

            .token-row-bottom {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .nav-menu {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                background: var(--primary-blue);
                padding: 20px;
                flex-direction: column;
                gap: 15px;
                box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
                z-index: 1000;
            }

            .nav-menu.show {
                display: flex;
            }

            .hamburger-menu {
                display: flex;
            }

            .hero-text h2 {
                font-size: 36px;
            }

            .btn-primary,
            .btn-secondary {
                width: 100%;
                justify-content: center;
            }

            .hero-actions {
                flex-direction: column;
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .token-actions {
                flex-direction: column;
            }

            .eligibility-form {
                grid-template-columns: 1fr;
            }

            .footer-content {
                grid-template-columns: 1fr;
            }

            .ai-container {
                gap: 20px;
            }

            .ai-input-panel,
            .ai-response-panel {
                padding: 20px;
            }

            .token-generator-card {
                padding: 25px;
            }

            .token-form-grid .form-group-full {
                grid-column: span 1;
            }

            .reading-controls {
                flex-direction: column;
                align-items: stretch;
            }

            .reading-status {
                margin-left: 0;
                justify-content: center;
            }

            .reading-buttons {
                justify-content: center;
            }

            .token-row-top {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .token-row-middle {
                grid-template-columns: 1fr;
            }

            .active-tokens-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .hero-text h2 {
                font-size: 28px;
            }

            .hero-text p {
                font-size: 16px;
            }

            .section-title {
                font-size: 28px;
            }

            .page-title {
                font-size: 28px;
            }

            .btn-primary,
            .btn-secondary {
                padding: 15px 25px;
                font-size: 16px;
            }

            .process-tabs {
                flex-direction: column;
            }

            .process-tab {
                width: 100%;
                text-align: center;
            }

            .token-generator-title {
                font-size: 24px;
            }
        }

        /* Page Navigation */
        .page {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .page.active {
            display: block;
        }

        /* AI Thinking Animation */
        @keyframes dot1 {

            0%,
            20% {
                opacity: 0;
            }

            40% {
                opacity: 1;
            }

            60%,
            100% {
                opacity: 0;
            }
        }

        @keyframes dot2 {

            0%,
            40% {
                opacity: 0;
            }

            60% {
                opacity: 1;
            }

            80%,
            100% {
                opacity: 0;
            }
        }

        @keyframes dot3 {

            0%,
            60% {
                opacity: 0;
            }

            80% {
                opacity: 1;
            }

            100% {
                opacity: 0;
            }
        }

        /* Voice Wave Animation */
        @keyframes voiceWave {
            0% {
                transform: scaleY(0.3);
            }

            50% {
                transform: scaleY(1);
            }

            100% {
                transform: scaleY(0.3);
            }
        }

        /* Accessibility Improvements */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Focus Styles */
        *:focus {
            outline: 2px solid var(--accent-gold);
            outline-offset: 2px;
        }

        /* Print Styles */
        @media print {

            .header,
            .footer,
            .token-actions,
            .response-actions,
            .hamburger-menu,
            .theme-toggle {
                display: none !important;
            }

            .token-card-landscape {
                box-shadow: none;
                border: 2px solid #000;
            }

            body {
                background: white !important;
                color: black !important;
            }
        }
    </style>
</head>

<body>
    <!-- Header / Navigation -->
    <header class="header" role="banner">
        <div class="container nav-container">
            <div class="logo-section" role="button" tabindex="0" onclick="showPage('home')"
                onkeypress="if(event.key === 'Enter') showPage('home')">
                <div class="logo" aria-label="Jan Seva Saathi Logo">🏛️</div>
                <div class="logo-text">
                    <h1>Jan Seva Saathi</h1>
                    <p>AI Powered Citizen Service Platform</p>
                </div>
            </div>
            <ul class="nav-menu" role="navigation">
                <li><a href="#" class="nav-link active" data-page="home" role="menuitem">Home</a></li>
                <li><a href="#" class="nav-link" data-page="ai-assistant" role="menuitem">AI Assistant</a></li>
                <li><a href="#" class="nav-link" data-page="process-guide" role="menuitem">Process Guide</a></li>
                <li><a href="#" class="nav-link" data-page="token-system" role="menuitem">Smart Token</a></li>
                <li><a href="#" class="nav-link" data-page="schemes" role="menuitem">Schemes</a></li>
                <li><a href="#" class="nav-link" data-page="accessibility" role="menuitem">Accessibility</a></li>
            </ul>
            <div class="nav-right">
                <!-- Theme Toggle -->
                <div class="theme-toggle" role="button" tabindex="0" aria-label="Toggle theme" onclick="toggleTheme()"
                    onkeypress="if(event.key === 'Enter') toggleTheme()">
                    <i class="fas fa-moon" id="themeIcon"></i>
                </div>
                <div class="hamburger-menu" role="button" tabindex="0" aria-label="Toggle menu" onclick="toggleMenu()"
                    onkeypress="if(event.key === 'Enter') toggleMenu()">
                    <i class="fas fa-bars"></i>
                </div>
            </div>
        </div>
    </header>

    <!-- Toast Notification -->
    <div class="toast" id="toast" role="alert" aria-live="polite">
        <i class="fas fa-check-circle"></i>
        <span id="toastMessage">Operation completed successfully!</span>
    </div>

    <!-- Home Page -->
    <section id="home" class="page active" role="main">
        <!-- Hero Section -->
        <section class="hero-section">
            <div class="container hero-content">
                <div class="hero-text">
                    <h2 id="heroTitle">Jan Seva Saathi – Your AI Guide for Government Services</h2>
                    <p id="heroSubtitle">Get scheme info, document list, and smart tokens in your local language. Reduce
                        wait times, get accurate information, and access services faster.</p>
                    <div class="hero-actions">
                        <button class="btn-primary" id="talkToAI" aria-label="Talk to AI Assistant"
                            onclick="showPage('ai-assistant')">
                            <i class="fas fa-microphone"></i> Talk to Jan Seva AI
                        </button>
                        <button class="btn-secondary" id="startWithText" aria-label="Start with text input"
                            onclick="showPage('ai-assistant')">
                            <i class="fas fa-keyboard"></i> Start with Text
                        </button>
                    </div>
                </div>
                <div class="hero-visual">
                    <div class="phone-mockup" aria-label="Demo of Jan Seva AI in action">
                        <div class="phone-screen">
                            <div class="chat-bubble">Hello! I'm Jan Seva AI. How can I help you today?</div>
                            <div class="chat-bubble user">I need a ration card</div>
                            <div class="chat-bubble">I'll help you with that. Are you looking for a new ration card or
                                renewal?</div>
                            <div class="chat-bubble user">New ration card</div>
                            <div class="chat-bubble">For a new ration card, you'll need: Aadhaar Card, Income
                                Certificate, Address Proof. Would you like to apply online or get a token for office
                                visit?</div>
                        </div>
                    </div>
                    <div class="token-visual">
                        <h4><i class="fas fa-ticket-alt"></i> Smart Token</h4>
                        <div class="token-details">
                            <div class="token-detail-item">
                                <div class="label">Token No:</div>
                                <div class="value">JS-1045</div>
                            </div>
                            <div class="token-detail-item">
                                <div class="label">Time Slot:</div>
                                <div class="value">11:30 AM</div>
                            </div>
                            <div class="token-detail-item">
                                <div class="label">Office:</div>
                                <div class="value">Tehsil Office</div>
                            </div>
                            <div class="token-detail-item">
                                <div class="label">Crowd:</div>
                                <div class="value status-medium">Medium</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Key Features Section - UPDATED for working navigation -->
        <section class="key-features-section">
            <div class="container">
                <h2 class="section-title">Our Key Features</h2>
                <div class="features-grid">
                    <div class="feature-card" onclick="showPage('ai-assistant')">
                        <div class="feature-icon">🤖</div>
                        <h3>AI Assistant</h3>
                        <p>Get instant answers in your local language. Speak or type your query in Hindi, English, or
                            regional languages.</p>
                        <button class="feature-btn" onclick="showPage('ai-assistant')">
                            Try AI Assistant →
                        </button>
                    </div>
                    <div class="feature-card" onclick="showPage('token-system')">
                        <div class="feature-icon">🎫</div>
                        <h3>Smart Token</h3>
                        <p>Generate live tokens with real-time crowd status. Get scheduled appointments and reduce
                            waiting time.</p>
                        <button class="feature-btn" onclick="showPage('token-system')">
                            Generate Token →
                        </button>
                    </div>
                    <div class="feature-card" onclick="showPage('schemes')">
                        <div class="feature-icon">📋</div>
                        <h3>Schemes & Services</h3>
                        <p>Browse all government schemes, check eligibility, and apply online. Find benefits you're
                            entitled to.</p>
                        <button class="feature-btn" onclick="showPage('schemes')">
                            Explore Schemes →
                        </button>
                    </div>
                    <div class="feature-card" onclick="showPage('process-guide')">
                        <div class="feature-icon">🗺️</div>
                        <h3>Process Guide</h3>
                        <p>Step-by-step guidance for every service. Online, offline, and hybrid processes explained
                            clearly.</p>
                        <button class="feature-btn" onclick="showPage('process-guide')">
                            View Guides →
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- How It Works Section -->
        <section class="how-it-works">
            <div class="container">
                <h2 class="section-title">How Jan Seva Saathi Works</h2>
                <div class="steps-container">
                    <div class="step-card">
                        <div class="step-number">1</div>
                        <div class="step-icon">🗣️</div>
                        <h3>Tell Your Problem</h3>
                        <p>Use voice or text to describe what government service you need. Speak in your local language
                            - Hindi, English, or regional languages.</p>
                    </div>
                    <div class="step-card">
                        <div class="step-number">2</div>
                        <div class="step-icon">🤖</div>
                        <h3>AI Explains & Checks Eligibility</h3>
                        <p>Our AI understands your request, checks eligibility for schemes, lists required documents,
                            and explains the complete process.</p>
                    </div>
                    <div class="step-card">
                        <div class="step-number">3</div>
                        <div class="step-icon">🎫</div>
                        <h3>Get Token or Online Link</h3>
                        <p>Receive a smart token with time slot for office visit or get direct link for online
                            application. No more waiting in long queues.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Problems Section -->
        <section class="problems-section">
            <div class="container">
                <h2 class="section-title">Problems We Solve For Citizens</h2>
                <div class="problems-grid">
                    <div class="problem-card">
                        <div class="problem-icon">❌</div>
                        <div class="problem-text">
                            <h3>Long Queues in Government Offices</h3>
                            <p>Citizens waste 4-6 hours waiting in lines for basic services. Our smart token system
                                provides scheduled appointments.</p>
                        </div>
                    </div>
                    <div class="problem-card">
                        <div class="problem-icon">❌</div>
                        <div class="problem-text">
                            <h3>No Clear Info About Schemes</h3>
                            <p>Complex eligibility criteria and lack of awareness prevent citizens from accessing
                                benefits they're entitled to.</p>
                        </div>
                    </div>
                    <div class="problem-card">
                        <div class="problem-icon">❌</div>
                        <div class="problem-text">
                            <h3>Confusing Document Requirements</h3>
                            <p>Citizens make multiple trips to offices due to incomplete documents. Our AI provides
                                precise document checklists.</p>
                        </div>
                    </div>
                    <div class="problem-card">
                        <div class="problem-icon">❌</div>
                        <div class="problem-text">
                            <h3>Language Barriers</h3>
                            <p>Official information is often only in English. Our platform works in local languages with
                                voice support.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </section>

    <!-- AI Assistant Page - UPDATED Layout -->
    <section id="ai-assistant" class="page" role="main">
        <div class="container page-container">
            <h1 class="page-title"><i class="fas fa-robot"></i> <span id="aiPageTitle">AI Assistant</span></h1>

            <!-- Two Column Layout: Input + AI Response -->
            <div class="ai-container">
                <!-- Left Column: Input Panel -->
                <div class="ai-input-panel">
                    <h2 class="ai-input-title"><i class="fas fa-microphone"></i> <span id="inputQueryText">Input Your
                            Query</span></h2>
                    <button class="voice-input-btn" id="voiceInputBtn" aria-label="Click to speak">
                        <i class="fas fa-microphone"></i>
                        <span id="voiceButtonText">Click to Speak</span>
                        <div class="voice-wave" id="voiceWave"></div>
                    </button>
                    <div class="divider" style="text-align: center; margin: 15px 0; color: var(--dark-gray);"
                        id="orText">OR</div>
                    <textarea class="text-input-area" id="textInputArea"
                        placeholder="Type your query here... Example: 'Mujhe ration card banana hai' or 'I need a new birth certificate'"
                        aria-label="Type your query"></textarea>
                    <div class="input-actions">
                        <button class="btn-action btn-speak" id="speakButton" aria-label="Speak the response">
                            <i class="fas fa-volume-up"></i> <span id="speakButtonText">Speak</span>
                        </button>
                        <button class="btn-action btn-send" id="sendTextButton" aria-label="Send text query">
                            <i class="fas fa-paper-plane"></i> <span id="sendButtonText">Send Text</span>
                        </button>
                    </div>

                    <!-- Auto Read Toggle -->
                    <div class="auto-read-toggle">
                        <span class="toggle-label" id="autoReadLabel">Auto Read AI Response:</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="autoReadToggle" checked aria-label="Auto read AI response">
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Right Column: AI Response Panel -->
                <div class="ai-response-panel">
                    <div class="ai-response-header">
                        <h3><i class="fas fa-comment-dots"></i> AI Response</h3>
                    </div>
                    <div class="ai-response-content" id="aiResponseContent">
                        <p id="aiResponseText">Hello! I'm your Jan Seva AI assistant. I can help you with government
                            services like ration cards, certificates, pension schemes, and more. Please tell me what you
                            need help with, and I'll explain everything in simple steps.</p>

                        <p><strong>How I can help you:</strong></p>
                        <ul>
                            <li>Explain government services in simple language</li>
                            <li>Check your eligibility for different schemes</li>
                            <li>Provide step-by-step guidance</li>
                            <li>List required documents</li>
                            <li>Generate smart tokens for office visits</li>
                        </ul>

                        <p>You can speak to me in Hindi, English, or other regional languages. Just click the microphone
                            button or type your question above.</p>
                    </div>

                    <div class="reading-controls">
                        <h4><i class="fas fa-volume-up"></i> Reading Controls</h4>
                        <div class="reading-buttons">
                            <button class="reading-btn" id="playReadingBtn" title="Play/Read Aloud">
                                <i class="fas fa-play"></i>
                            </button>
                            <button class="reading-btn" id="pauseReadingBtn" title="Pause" disabled>
                                <i class="fas fa-pause"></i>
                            </button>
                            <button class="reading-btn" id="replayReadingBtn" title="Replay" disabled>
                                <i class="fas fa-redo"></i>
                            </button>
                        </div>

                        <div class="volume-control">
                            <i class="fas fa-volume-down"></i>
                            <input type="range" class="volume-slider" id="volumeSlider" min="0" max="1" step="0.1"
                                value="1">
                            <i class="fas fa-volume-up"></i>
                        </div>

                        <div class="reading-status">
                            <span id="readingStatusText">Ready to read</span>
                            <div class="reading-progress">
                                <div class="reading-progress-bar" id="readingProgressBar"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Application Cards (Below) -->
            <div class="ai-application-cards">
                <div class="ai-response-card" id="onlineCard">
                    <button class="response-speak-btn" id="onlineSpeakBtn" title="Read AI Response"
                        aria-label="Read AI response aloud">
                        <i class="fas fa-volume-up"></i>
                    </button>
                    <div class="response-header online">
                        <i class="fas fa-check-circle"></i> <span id="onlineAvailableText">Online Application
                            Available</span>
                    </div>
                    <p id="onlineDescription">You can apply for this service online through the official government
                        portal.</p>
                    <h4 id="stepsTitle">Steps:</h4>
                    <ol class="steps-list" id="onlineSteps">
                        <li>Visit the official portal</li>
                        <li>Login with your Aadhaar number</li>
                        <li>Fill the application form</li>
                        <li>Upload required documents</li>
                        <li>Submit and note application number</li>
                    </ol>
                    <h4 id="requiredDocsTitle">Required Documents:</h4>
                    <div class="documents-list" id="onlineDocuments">
                        <div class="doc-tag">Aadhaar Card</div>
                        <div class="doc-tag">Address Proof</div>
                        <div class="doc-tag">Income Certificate</div>
                    </div>
                    <div class="response-actions">
                        <button class="btn-action btn-send" id="goToPortalBtn">
                            <i class="fas fa-external-link-alt"></i> <span id="goToPortalText">Go to Official
                                Portal</span>
                        </button>
                    </div>
                </div>
                <div class="ai-response-card" id="offlineCard">
                    <button class="response-speak-btn" id="offlineSpeakBtn" title="Read AI Response"
                        aria-label="Read AI response aloud">
                        <i class="fas fa-volume-up"></i>
                    </button>
                    <div class="response-header offline">
                        <i class="fas fa-building"></i> <span id="officeRequiredText">Office Visit Required</span>
                    </div>
                    <p id="offlineDescription">For document verification, you need to visit the government office.
                    </p>
                    <h4 id="officeDetailsTitle">Office Details:</h4>
                    <p id="officeDetails"><strong>Tehsil Office, Raipur</strong><br>
                        Address: Civil Lines, Raipur, Chhattisgarh 492001<br>
                        Hours: 10 AM - 5 PM (Mon-Fri)</p>
                    <h4 id="requiredDocsTitle2">Required Documents (Originals + Copies):</h4>
                    <div class="documents-list" id="offlineDocuments">
                        <div class="doc-tag offline">Aadhaar Card</div>
                        <div class="doc-tag offline">Income Certificate</div>
                        <div class="doc-tag offline">Address Proof</div>
                    </div>
                    <div class="response-actions">
                        <button class="btn-action btn-speak" id="generateTokenBtn">
                            <i class="fas fa-ticket-alt"></i> <span id="generateTokenText">Generate Token</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Process Guide Page -->
    <section id="process-guide" class="page" role="main">
        <div class="container page-container">
            <h1 class="page-title"><i class="fas fa-map-signs"></i> <span id="processGuideTitle">Process Guide</span>
            </h1>
            <div class="process-tabs">
                <button class="process-tab active" data-tab="online" aria-controls="onlineProcess"
                    aria-selected="true">Online Process</button>
                <button class="process-tab" data-tab="offline" aria-controls="offlineProcess"
                    aria-selected="false">Office Visit Process</button>
                <button class="process-tab" data-tab="hybrid" aria-controls="hybridProcess" aria-selected="false">Hybrid
                    Process</button>
            </div>
            <div class="process-content">
                <div class="process-tab-content active" id="onlineProcess" role="tabpanel" aria-labelledby="onlineTab">
                    <h3 style="color: var(--govt-green); margin-bottom: 20px;">
                        <i class="fas fa-laptop"></i> Online Application Process
                    </h3>
                    <div class="process-step">
                        <div class="step-number-circle">1</div>
                        <div class="step-details">
                            <h4>Visit Official Portal</h4>
                            <p>Go to the government's official website for the service. For example, use the National
                                Portal of India or state-specific portals.</p>
                            <span class="step-duration">5 minutes</span>
                        </div>
                    </div>
                    <div class="process-step">
                        <div class="step-number-circle">2</div>
                        <div class="step-details">
                            <h4>Register/Login</h4>
                            <p>Create an account using your mobile number and Aadhaar, or login with existing
                                credentials. Ensure your mobile is linked with Aadhaar.</p>
                            <span class="step-duration">10 minutes</span>
                        </div>
                    </div>
                    <div class="process-step">
                        <div class="step-number-circle">3</div>
                        <div class="step-details">
                            <h4>Fill Application Form</h4>
                            <p>Complete the online form with accurate personal details. The form will auto-fill some
                                information from your Aadhaar database.</p>
                            <span class="step-duration">15-20 minutes</span>
                        </div>
                    </div>
                    <div class="process-step">
                        <div class="step-number-circle">4</div>
                        <div class="step-details">
                            <h4>Upload Documents</h4>
                            <p>Scan and upload all required documents in specified formats (PDF/JPG). Ensure documents
                                are clear and readable.</p>
                            <span class="step-duration">10 minutes</span>
                        </div>
                    </div>
                    <div class="process-step">
                        <div class="step-number-circle">5</div>
                        <div class="step-details">
                            <h4>Submit & Track</h4>
                            <p>Submit the application and note your application number. You can track status online and
                                will receive SMS updates.</p>
                            <span class="step-duration">5 minutes</span>
                        </div>
                    </div>
                </div>
                <div class="process-tab-content" id="offlineProcess" role="tabpanel" aria-labelledby="offlineTab">
                    <h3 style="color: var(--govt-red); margin-bottom: 20px;">
                        <i class="fas fa-building"></i> Office Visit Process
                    </h3>
                    <div class="process-step">
                        <div class="step-number-circle">1</div>
                        <div class="step-details">
                            <h4>Generate Smart Token</h4>
                            <p>Use Jan Seva Saathi to generate a smart token with scheduled time slot. This reduces
                                waiting time at the office.</p>
                            <span class="step-duration">2 minutes</span>
                        </div>
                    </div>
                    <div class="process-step">
                        <div class="step-number-circle">2</div>
                        <div class="step-details">
                            <h4>Prepare Documents</h4>
                            <p>Collect all original documents plus 2 photocopies as per the checklist provided by the AI
                                assistant.</p>
                            <span class="step-duration">Varies</span>
                        </div>
                    </div>
                    <div class="process-step">
                        <div class="step-number-circle">3</div>
                        <div class="step-details">
                            <h4>Visit Office</h4>
                            <p>Arrive 10 minutes before your time slot. Show your token at the designated counter for
                                priority service.</p>
                            <span class="step-duration">Travel time + 30 min</span>
                        </div>
                    </div>
                    <div class="process-step">
                        <div class="step-number-circle">4</div>
                        <div class="step-details">
                            <h4>Document Verification</h4>
                            <p>Officials will verify your original documents. You may need to fill additional forms
                                provided at the office.</p>
                            <span class="step-duration">15-30 minutes</span>
                        </div>
                    </div>
                    <div class="process-step">
                        <div class="step-number-circle">5</div>
                        <div class="step-details">
                            <h4>Receive Acknowledgement</h4>
                            <p>Get an acknowledgement receipt with tracking number. You can check status online or via
                                SMS.</p>
                            <span class="step-duration">5 minutes</span>
                        </div>
                    </div>
                </div>
                <div class="process-tab-content" id="hybridProcess" role="tabpanel" aria-labelledby="hybridTab">
                    <h3 style="color: var(--accent-gold); margin-bottom: 20px;">
                        <i class="fas fa-exchange-alt"></i> Hybrid Process
                    </h3>
                    <div class="process-step">
                        <div class="step-number-circle">1</div>
                        <div class="step-details">
                            <h4>Start Online Application</h4>
                            <p>Begin the process online by filling the initial application form and uploading scanned
                                documents.</p>
                            <span class="step-duration">20 minutes</span>
                        </div>
                    </div>
                    <div class="process-step">
                        <div class="step-number-circle">2</div>
                        <div class="step-details">
                            <h4>Schedule Office Visit</h4>
                            <p>After online submission, schedule an appointment for biometric verification or document
                                submission.</p>
                            <span class="step-duration">5 minutes</span>
                        </div>
                    </div>
                    <div class="process-step">
                        <div class="step-number-circle">3</div>
                        <div class="step-details">
                            <h4>Complete In-Person</h4>
                            <p>Visit the office for final verification. Bring originals of uploaded documents for
                                cross-checking.</p>
                            <span class="step-duration">30 minutes</span>
                        </div>
                    </div>
                    <div class="process-step">
                        <div class="step-number-circle">4</div>
                        <div class="step-details">
                            <h4>Track Online</h4>
                            <p>After office visit, track your application status online. You'll receive SMS
                                notifications at each stage.</p>
                            <span class="step-duration">Ongoing</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Smart Token System Page - UPDATED with Landscape Token Card -->
    <section id="token-system" class="page" role="main">
        <!-- Token Generator Form -->
        <section class="token-generator-section">
            <div class="container">
                <div class="token-generator-card">
                    <h2 class="token-generator-title">Generate Your Smart Token</h2>
                    <p class="token-generator-subtitle">Create a token for office visit with preferred time slot and
                        service type</p>

                    <form id="tokenGeneratorForm">
                        <div class="token-form-grid">
                            <div class="form-group">
                                <label class="form-label" for="serviceType">Service Type</label>
                                <select class="form-select" id="serviceType" required>
                                    <option value="">Select Service Type</option>
                                    <option value="ration">Ration Card</option>
                                    <option value="birth">Birth Certificate</option>
                                    <option value="income">Income Certificate</option>
                                    <option value="caste">Caste Certificate</option>
                                    <option value="pension">Pension Application</option>
                                    <option value="aadhaar">Aadhaar Update</option>
                                    <option value="voter">Voter ID</option>
                                    <option value="other">Other Service</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="officeSelect">Select Office</label>
                                <select class="form-select" id="officeSelect" required>
                                    <option value="">Select Office</option>
                                    <option value="tehsil-raipur">Tehsil Office, Raipur</option>
                                    <option value="municipal-delhi">Municipal Corporation, Delhi</option>
                                    <option value="collectorate-mumbai">District Collectorate, Mumbai</option>
                                    <option value="csc-bangalore">CSC Center, Bangalore</option>
                                    <option value="panchayat-pune">Gram Panchayat Office, Pune</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="preferredDate">Preferred Date</label>
                                <input type="date" class="form-input" id="preferredDate" required min="">
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="timeSlot">Time Slot</label>
                                <select class="form-select" id="timeSlot" required>
                                    <option value="">Select Time Slot</option>
                                    <option value="9-10">9:00 AM - 10:00 AM</option>
                                    <option value="10-11">10:00 AM - 11:00 AM</option>
                                    <option value="11-12">11:00 AM - 12:00 PM</option>
                                    <option value="12-1">12:00 PM - 1:00 PM</option>
                                    <option value="2-3">2:00 PM - 3:00 PM</option>
                                    <option value="3-4">3:00 PM - 4:00 PM</option>
                                    <option value="4-5">4:00 PM - 5:00 PM</option>
                                </select>
                            </div>

                            <div class="form-group form-group-full">
                                <label class="form-label" for="mobileNumber">Mobile Number (for updates)</label>
                                <input type="tel" class="form-input" id="mobileNumber"
                                    placeholder="Enter your 10-digit mobile number" pattern="[0-9]{10}" required>
                                <small style="color: var(--dark-gray); margin-top: 5px; display: block;">We'll send
                                    token confirmation and reminders via SMS</small>
                            </div>
                        </div>

                        <button type="submit" class="token-generate-btn">
                            <i class="fas fa-ticket-alt"></i> Generate Smart Token
                        </button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Generated Token Display - LANDSCAPE LAYOUT -->
        <div class="container">
            <div class="token-card-container">
                <div class="token-card-landscape" id="tokenCard">
                    <!-- Top Row -->
                    <div class="token-row-top">
                        <div class="token-number-landscape">
                            <i class="fas fa-ticket-alt"></i>
                            <span id="tokenNumberLandscape">JS-1045</span>
                        </div>
                        <div class="service-type-landscape">
                            <i class="fas fa-file-alt"></i>
                            <span id="serviceTypeLandscape">Ration Card</span>
                        </div>
                        <div class="crowd-status-landscape medium" id="crowdStatusLandscape">
                            <i class="fas fa-users"></i>
                            <span>Medium Crowd</span>
                        </div>
                    </div>

                    <!-- Middle Row -->
                    <div class="token-row-middle">
                        <div class="office-info-landscape">
                            <div class="info-label">
                                <i class="fas fa-building"></i> Office & Location
                            </div>
                            <div class="info-value" id="officeLandscape">
                                Tehsil Office, Raipur
                            </div>
                        </div>
                        <div class="date-info-landscape">
                            <div class="info-label">
                                <i class="fas fa-calendar-alt"></i> Appointment Date
                            </div>
                            <div class="info-value" id="dateLandscape">
                                15 March 2024
                            </div>
                        </div>
                        <div class="time-info-landscape">
                            <div class="info-label">
                                <i class="fas fa-clock"></i> Time Slot
                            </div>
                            <div class="info-value" id="timeSlotLandscape">
                                11:30 AM – 12:00 PM
                            </div>
                        </div>
                    </div>

                    <!-- Bottom Row -->
                    <div class="token-row-bottom">
                        <div class="wait-time-landscape">
                            <div class="info-label">
                                <i class="fas fa-hourglass-half"></i> Expected Wait Time
                            </div>
                            <div class="info-value" id="waitTimeLandscape">
                                15-20 minutes
                            </div>
                        </div>
                        <div class="validity-landscape">
                            <div class="info-label">
                                <i class="fas fa-shield-alt"></i> Token Validity
                            </div>
                            <div class="info-value" id="validityLandscape">
                                30 minutes from scheduled time
                            </div>
                        </div>
                        <div class="instructions-landscape">
                            <h4><i class="fas fa-info-circle"></i> Important Instructions</h4>
                            <ul class="instructions-list" id="instructionsListLandscape">
                                <li>Carry original documents + 2 photocopies</li>
                                <li>Reach office 10 minutes before your time slot</li>
                                <li>Show this token at Counter No. 3</li>
                                <li>Token validity: 30 minutes from scheduled time</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="token-actions-landscape">
                        <button class="btn-download-token" id="downloadTokenBtnLandscape">
                            <i class="fas fa-download"></i> Download Token (PDF)
                        </button>
                        <button class="btn-save-token" id="saveTokenBtnLandscape">
                            <i class="fas fa-mobile-alt"></i> Save on Phone
                        </button>
                    </div>
                </div>
            </div>

            <!-- Active Tokens Section -->
            <div class="active-tokens-section">
                <h2 class="active-tokens-title">Active Tokens</h2>
                <div class="active-tokens-grid" id="activeTokensGrid">
                    <!-- Active tokens will be inserted here by JavaScript -->
                </div>
            </div>
        </div>
    </section>

    <!-- Schemes & Services Page -->
    <section id="schemes" class="page" role="main">
        <div class="container page-container">
            <h1 class="page-title"><i class="fas fa-search"></i> Schemes & Services Explorer</h1>

            <!-- Eligibility Checker -->
            <div class="eligibility-checker">
                <div class="eligibility-header">
                    <h2 style="color: var(--primary-blue);">Eligibility Checker</h2>
                    <button class="btn-action btn-speak" id="voiceProfileBtn" aria-label="Use voice for profile input">
                        <i class="fas fa-microphone"></i> Voice Profile Input
                    </button>
                </div>
                <div class="eligibility-form">
                    <div class="form-group">
                        <label class="form-label" for="ageInput">Age</label>
                        <input type="number" class="form-input" id="ageInput" placeholder="Enter age" min="1" max="120"
                            aria-label="Enter your age">
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="incomeInput">Annual Income (₹)</label>
                        <select class="form-input" id="incomeInput" aria-label="Select annual income range">
                            <option value="">Select Income</option>
                            <option value="low">Less than 1,00,000</option>
                            <option value="medium">1,00,000 - 3,00,000</option>
                            <option value="high">3,00,000 - 5,00,000</option>
                            <option value="very-high">Above 5,00,000</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="categoryInput">Category</label>
                        <select class="form-input" id="categoryInput" aria-label="Select your category">
                            <option value="">Select Category</option>
                            <option value="general">General</option>
                            <option value="obc">OBC</option>
                            <option value="sc">SC</option>
                            <option value="st">ST</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="stateInput">State</label>
                        <select class="form-input" id="stateInput" aria-label="Select your state">
                            <option value="">Select State</option>
                            <option value="chhattisgarh">Chhattisgarh</option>
                            <option value="maharashtra">Maharashtra</option>
                            <option value="delhi">Delhi</option>
                            <option value="karnataka">Karnataka</option>
                            <option value="tamilnadu">Tamil Nadu</option>
                        </select>
                    </div>
                </div>
                <button class="btn-primary" id="checkEligibilityBtn" style="width: 100%; margin-bottom: 20px;"
                    aria-label="Check eligible schemes">
                    <i class="fas fa-calculator"></i> Check Eligible Schemes
                </button>

                <!-- Recommended Schemes -->
                <div id="recommendedSchemes" style="display: none;">
                    <h4 style="color: var(--primary-blue); margin-bottom: 15px;">Recommended Schemes for You:</h4>
                    <div class="eligible-schemes-grid" id="eligibleSchemesGrid">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <p class="section-subtitle"
                style="text-align: center; margin-bottom: 40px; font-size: 18px; color: var(--dark-gray);">
                Browse government schemes by category. Click on any category to see detailed information.
            </p>
            <div class="schemes-grid">
                <div class="scheme-category-card" data-scheme="health" role="button" tabindex="0"
                    onclick="showSchemeDetail('health')"
                    onkeypress="if(event.key === 'Enter') showSchemeDetail('health')">
                    <div class="scheme-icon">🏥</div>
                    <h3>Health Schemes</h3>
                    <p>Ayushman Bharat, PM Jan Arogya, Health Insurance</p>
                </div>
                <div class="scheme-category-card" data-scheme="education" role="button" tabindex="0"
                    onclick="showSchemeDetail('education')"
                    onkeypress="if(event.key === 'Enter') showSchemeDetail('education')">
                    <div class="scheme-icon">📚</div>
                    <h3>Education Schemes</h3>
                    <p>Scholarships, Mid-day Meal, Free Textbooks</p>
                </div>
                <div class="scheme-category-card" data-scheme="pension" role="button" tabindex="0"
                    onclick="showSchemeDetail('pension')"
                    onkeypress="if(event.key === 'Enter') showSchemeDetail('pension')">
                    <div class="scheme-icon">👵</div>
                    <h3>Pension Schemes</h3>
                    <p>Old Age, Widow, Disability Pensions</p>
                </div>
                <div class="scheme-category-card" data-scheme="ration" role="button" tabindex="0"
                    onclick="showSchemeDetail('ration')"
                    onkeypress="if(event.key === 'Enter') showSchemeDetail('ration')">
                    <div class="scheme-icon">🛒</div>
                    <h3>Ration & Food</h3>
                    <p>Food Security, Ration Cards, PM Garib Kalyan</p>
                </div>
                <div class="scheme-category-card" data-scheme="certificates" role="button" tabindex="0"
                    onclick="showSchemeDetail('certificates')"
                    onkeypress="if(event.key === 'Enter') showSchemeDetail('certificates')">
                    <div class="scheme-icon">📄</div>
                    <h3>Certificates</h3>
                    <p>Birth, Death, Income, Caste, Domicile</p>
                </div>
                <div class="scheme-category-card" data-scheme="employment" role="button" tabindex="0"
                    onclick="showSchemeDetail('employment')"
                    onkeypress="if(event.key === 'Enter') showSchemeDetail('employment')">
                    <div class="scheme-icon">💼</div>
                    <h3>Employment</h3>
                    <p>MGNREGA, Skill Development, Startup Schemes</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Language & Accessibility Page -->
    <section id="accessibility" class="page" role="main">
        <div class="container page-container">
            <h1 class="page-title"><i class="fas fa-universal-access"></i> Language & Accessibility</h1>
            <p class="section-subtitle"
                style="text-align: center; margin-bottom: 40px; font-size: 18px; color: var(--dark-gray);">
                Centralized settings for language, voice mode, and accessibility features.
            </p>
            <div class="accessibility-container">
                <div class="accessibility-card">
                    <h3><i class="fas fa-language"></i> Language Support</h3>
                    <p>Select your preferred language for all content and voice features:</p>
                    <div class="language-options">
                        <div class="language-option active" data-lang="hi" role="button" tabindex="0"
                            onclick="changeLanguage('hi')" onkeypress="if(event.key === 'Enter') changeLanguage('hi')">
                            <i class="fas fa-check-circle"></i> हिंदी (Hindi)
                        </div>
                        <div class="language-option" data-lang="en" role="button" tabindex="0"
                            onclick="changeLanguage('en')" onkeypress="if(event.key === 'Enter') changeLanguage('en')">
                            <i class="fas fa-check-circle"></i> English
                        </div>
                        <div class="language-option" data-lang="mr" role="button" tabindex="0"
                            onclick="changeLanguage('mr')" onkeypress="if(event.key === 'Enter') changeLanguage('mr')">
                            <i class="fas fa-check-circle"></i> मराठी (Marathi)
                        </div>
                        <div class="language-option" data-lang="te" role="button" tabindex="0"
                            onclick="changeLanguage('te')" onkeypress="if(event.key === 'Enter') changeLanguage('te')">
                            <i class="fas fa-check-circle"></i> తెలుగు (Telugu)
                        </div>
                    </div>
                    <p style="margin-top: 20px; font-size: 14px; color: var(--dark-gray);">
                        <i class="fas fa-info-circle"></i> Language selection affects all text content, voice input, and
                        AI responses.
                    </p>
                </div>
                <div class="accessibility-card">
                    <h3><i class="fas fa-assistive-listening-systems"></i> Voice Mode</h3>
                    <p>Enable voice features for easier interaction:</p>
                    <div style="margin: 20px 0;">
                        <button class="btn-action btn-speak" id="listenToAI" style="width: 100%;"
                            aria-label="Listen to AI response">
                            <i class="fas fa-headphones"></i> <span id="listenButtonText">Listen to AI Response</span>
                        </button>
                    </div>
                    <div style="margin: 20px 0;">
                        <button class="btn-action btn-send" id="speakInstead" style="width: 100%;"
                            aria-label="Speak instead of typing">
                            <i class="fas fa-microphone"></i> <span id="speakInsteadText">Speak Instead of Typing</span>
                        </button>
                    </div>
                    <div class="auto-read-toggle"
                        style="margin-top: 30px; padding-top: 30px; border-top: 1px solid var(--medium-gray);">
                        <span class="toggle-label" id="autoReadLabel2">Auto Read AI Responses:</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="autoReadToggle2" checked aria-label="Auto read AI response">
                            <span class="slider"></span>
                        </label>
                    </div>
                </div>
                <div class="accessibility-card">
                    <h3><i class="fas fa-eye"></i> Display Settings</h3>
                    <p>Adjust display for better readability:</p>
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-top: 30px;">
                        <span id="simpleModeLabel">Enable Simple Mode:</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="simpleModeToggle" aria-label="Enable simple mode">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-top: 20px;">
                        <span>Dark/Light Theme:</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="themeToggle" aria-label="Toggle theme">
                            <span class="slider"></span>
                        </label>
                    </div>
                    <div style="margin-top: 30px;">
                        <div class="doc-tag" style="display: inline-block; margin-right: 10px;">Bigger Text</div>
                        <div class="doc-tag" style="display: inline-block; margin-right: 10px;">High Contrast</div>
                        <div class="doc-tag" style="display: inline-block;">Voice Guidance</div>
                    </div>
                </div>
            </div>
            <div
                style="text-align: center; margin-top: 40px; padding: 20px; background: rgba(45, 74, 138, 0.1); border-radius: 10px;">
                <h4><i class="fas fa-lightbulb"></i> Accessibility Tips</h4>
                <p style="color: var(--dark-gray); margin-top: 10px;">
                    For best experience:
                    <br>1. Use headphones for clear voice output
                    <br>2. Enable simple mode for larger text
                    <br>3. Use voice input in quiet environments
                </p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer" role="contentinfo">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h4>Jan Seva Saathi</h4>
                    <p>AI-powered platform for accessible government services. Reducing wait times, improving
                        transparency, and empowering citizens.</p>
                </div>
                <div class="footer-column">
                    <h4>Quick Links</h4>
                    <ul class="footer-links">
                        <li><a href="#" class="nav-link" data-page="home">Home</a></li>
                        <li><a href="#" class="nav-link" data-page="ai-assistant">AI Assistant</a></li>
                        <li><a href="#" class="nav-link" data-page="process-guide">Process Guide</a></li>
                        <li><a href="#" class="nav-link" data-page="token-system">Smart Token</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Services</h4>
                    <ul class="footer-links">
                        <li><a href="#" onclick="showPage('schemes')">Ration Card Services</a></li>
                        <li><a href="#" onclick="showPage('schemes')">Birth/Death Certificate</a></li>
                        <li><a href="#" onclick="showPage('schemes')">Pension Schemes</a></li>
                        <li><a href="#" onclick="showPage('schemes')">Health Insurance</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Contact & Support</h4>
                    <ul class="footer-links">
                        <li><a href="#" onclick="showToast('Help Center: Coming soon!')">Help Center</a></li>
                        <li><a href="#" onclick="showFeedbackModal()">Feedback</a></li>
                        <li><a href="#" onclick="showPage('accessibility')">Accessibility</a></li>
                        <li><a href="#" onclick="showToast('Privacy Policy: Coming soon!')">Privacy Policy</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>© 2026 Jan Seva Saathi – AI Powered Citizen Service Platform. All rights reserved.</p>
                <p>This is a prototype for hackathon demonstration purposes.</p>
            </div>
        </div>
    </footer>

    <!-- Feedback Modal -->
    <div class="modal-overlay" id="feedbackModal" style="display: none;">
        <div class="modal-content">
            <h2 style="color: var(--primary-blue); margin-bottom: 20px;"><i class="fas fa-comment-dots"></i> Give
                Feedback</h2>
            <div class="form-group">
                <label class="form-label">Your Feedback</label>
                <textarea class="form-input" id="feedbackText" rows="5"
                    placeholder="Tell us how we can improve..."></textarea>
            </div>
            <div class="form-group">
                <label class="form-label">Rating</label>
                <div style="display: flex; gap: 10px; margin-top: 10px;">
                    <button class="btn-action" onclick="setRating(1)">★</button>
                    <button class="btn-action" onclick="setRating(2)">★★</button>
                    <button class="btn-action" onclick="setRating(3)">★★★</button>
                    <button class="btn-action" onclick="setRating(4)">★★★★</button>
                    <button class="btn-action" onclick="setRating(5)">★★★★★</button>
                </div>
            </div>
            <div class="response-actions" style="margin-top: 30px;">
                <button class="btn-action btn-speak" onclick="submitFeedback()">
                    <i class="fas fa-paper-plane"></i> Submit Feedback
                </button>
                <button class="btn-action btn-send" onclick="closeFeedbackModal()">
                    <i class="fas fa-times"></i> Cancel
                </button>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // COMPLETE ENHANCED JAN SEVA SAATHI

        // Initialize application
        document.addEventListener('DOMContentLoaded', function () {
            initEnhancedFeatures();
            loadSavedData();
            initTheme();
            setupTokenGeneratorForm();
            setupEventListeners();
            initReadingControls();
            initGroqAIService();
            console.log('Jan Seva Saathi - Enhanced Version Loaded!');
        });

        // ============================================
        // 1. GROQ AI SERVICE LAYER
        // ============================================
        class GroqAIService {
            constructor() {
                this.apiKey = 'XXXXXXXXXXXXXXXXXXX'; // Groq API key here
                this.apiUrl = 'https://api.groq.com/openai/v1/chat/completions';
                this.model = 'llama-3.3-70b-versatile';
                this.conversationHistory = [];
                this.maxHistoryLength = 10;
            }

            setApiKey(apiKey) {
                this.apiKey = apiKey;
            }

            async processQuery(userQuery, context = {}) {
                try {
                    // Use mock response if no API key (for demo)
                    if (!this.apiKey) {
                        return this.generateMockResponse(userQuery, context);
                    }

                    const messages = this.buildMessages(userQuery, context);

                    const response = await fetch(this.apiUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${this.apiKey}`
                        },
                        body: JSON.stringify({
                            model: this.model,
                            messages: messages,
                            temperature: 0.7,
                            max_tokens: 1000
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`Groq API error: ${response.status}`);
                    }

                    const data = await response.json();
                    const aiResponse = data.choices[0].message.content;

                    this.updateHistory(userQuery, aiResponse);

                    return this.parseResponse(aiResponse, context);

                } catch (error) {
                    console.error('Groq AI Error:', error);
                    return this.generateMockResponse(userQuery, context);
                }
            }

            buildMessages(userQuery, context) {
                const systemPrompt = `You are Jan Seva AI, a helpful assistant for Indian government services.

                Your task is to:
                1. Understand the user's query about indian government services
                2. Provide clear, step-by-step explanations in simple language
                3. Identify the service type (ration card, birth certificate, pension, etc.)
                4. Determine if it's an online, offline, or hybrid process
                5. List required documents
                6. Provide eligibility information if relevant

                Context: User is from ${context.location || 'भारत,India'}.
                Language preference: ${context.language || 'Hindi'}.

                LANGUAGE RULE:
                - If the user writes in Hindi or Hinglish, reply fully in simple Hindi (Devanagari)
                - If the user writes in English, reply in simple English
                - Do not mix languages

                HEADING RULES (Language-aware):
                - If response is in Hindi, use:
                  चरण-दर-चरण प्रक्रिया:
                  आवश्यक दस्तावेज़:
                  पात्रता:
                  अगले कदम:
                - If response is in English/Hinglish, use:
                  Step-by-step process:
                  Required documents:
                  Eligibility:
                  Next steps:

                FORMATTING RULES:
                - Do NOT use **, *, markdown, or special formatting
                - Do NOT write labels like "Main explanation"
                - Start directly with a natural explanation paragraph
                - Next steps`;

                const messages = [
                    {
                        role: 'system',
                        content: systemPrompt
                    },
                    ...this.conversationHistory,
                    {
                        role: 'user',
                        content: userQuery
                    }
                ];

                return messages;
            }

            updateHistory(userQuery, aiResponse) {
                this.conversationHistory.push(
                    { role: 'user', content: userQuery },
                    { role: 'assistant', content: aiResponse }
                );

                if (this.conversationHistory.length > this.maxHistoryLength * 2) {
                    this.conversationHistory = this.conversationHistory.slice(-this.maxHistoryLength * 2);
                }
            }

            parseResponse(aiResponse, context) {
                const structuredData = {
                    naturalResponse: aiResponse,
                    serviceType: this.extractServiceType(aiResponse),
                    processType: this.extractProcessType(aiResponse),
                    documents: this.extractDocuments(aiResponse),
                    steps: this.extractSteps(aiResponse),
                    eligibility: this.extractEligibility(aiResponse)
                };

                return structuredData;
            }

            extractServiceType(response) {
                const services = [
                    'ration card', 'birth certificate', 'death certificate',
                    'income certificate', 'caste certificate', 'domicile certificate',
                    'pension', 'aadhaar', 'voter id', 'passport', 'driving license',
                    'electricity bill', 'water bill', 'property tax', 'health scheme',
                    'education scheme', 'employment scheme'
                ];

                for (const service of services) {
                    if (response.toLowerCase().includes(service)) {
                        return service;
                    }
                }

                return 'government service';
            }

            extractProcessType(response) {
                if (response.toLowerCase().includes('online') && response.toLowerCase().includes('portal')) {
                    return 'online';
                } else if (response.toLowerCase().includes('office') || response.toLowerCase().includes('visit')) {
                    return 'offline';
                } else if (response.toLowerCase().includes('both') || response.toLowerCase().includes('hybrid')) {
                    return 'hybrid';
                }
                return 'online';
            }

            extractDocuments(response) {
                const documentKeywords = ['document', 'aadhaar', 'proof', 'certificate', 'photo', 'id'];
                const lines = response.split('\n');
                const documents = [];

                for (const line of lines) {
                    if (documentKeywords.some(keyword => line.toLowerCase().includes(keyword))) {
                        const docMatch = line.match(/[A-Z][a-z]+(?:\s+[A-Z][a-z]+)*(?:\s+[Cc]ard|\s+[Cc]ertificate|\s+[Pp]roof)/g);
                        if (docMatch) {
                            documents.push(...docMatch);
                        }
                    }
                }

                return documents.length > 0 ? documents : [''];
            }

            extractSteps(response) {
                const steps = [];
                const lines = response.split('\n');

                for (const line of lines) {
                    if (line.match(/^\d+\./) || line.match(/^Step \d+/i) || line.match(/^\•/)) {
                        steps.push(line.trim());
                    }
                }

                return steps.length > 0 ? steps : [
                ];
            }

            extractEligibility(response) {
                const eligibilityKeywords = ['eligible', 'eligibility', 'qualify', 'requirements', 'criteria'];

                for (const line of response.split('\n')) {
                    if (eligibilityKeywords.some(keyword => line.toLowerCase().includes(keyword))) {
                        return line.trim();
                    }
                }

                return 'General eligibility applies. Please check specific requirements.';
            }

            generateMockResponse(userQuery, context) {
                const { serviceType, detectedService } = determineServicePath(userQuery);

                return {
                    naturalResponse: this.generateNaturalResponse(userQuery, serviceType, detectedService),
                    serviceType: detectedService,
                    processType: serviceType,
                    documents: ['Aadhaar Card', 'Address Proof', 'Passport Size Photo', 'Income Certificate'],
                    steps: [
                        'Check eligibility requirements',
                        'Collect required documents',
                        serviceType === 'online' ? 'Visit official portal' : 'Visit government office',
                        'Submit application',
                        'Track application status'
                    ],
                    eligibility: 'Based on standard government criteria. Age, income, and residence requirements may apply.'
                };
            }

            generateNaturalResponse(userQuery, serviceType, detectedService) {
                const responses = {
                    online: `I can help you with ${detectedService}. This service is available online through the official government portal. Here's the complete process:\n\n1. Visit the official website for ${detectedService}\n2. Login with your Aadhaar number\n3. Fill the online application form\n4. Upload scanned copies of required documents\n5. Submit and note your application number\n\nYou'll receive SMS updates on your application status. The process usually takes 7-15 working days.`,
                    offline: `For ${detectedService}, you need to visit the government office for document verification. Here's what you need to do:\n\n1. Prepare all original documents plus 2 photocopies\n2. Visit the nearest Tehsil/District office\n3. Get a token from the counter (I can generate one for you)\n4. Submit your application to the concerned officer\n5. Get acknowledgement receipt with tracking number\n\nOffice hours are typically 10 AM to 5 PM, Monday to Friday.`,
                    hybrid: `For ${detectedService}, you can use the hybrid approach - start online and finish at office. This is efficient:\n\n1. Begin application on the official portal\n2. Fill basic details and upload documents\n3. Schedule appointment for biometric verification\n4. Visit office with original documents\n5. Complete verification and get confirmation\n\nThis combines online convenience with in-person security.`
                };

                return responses[serviceType] || `I understand you need help with ${detectedService}. Let me guide you through the complete process step by step.`;
            }
        }

        // Initialize Groq AI Service
        let groqService;

        function initGroqAIService() {
            groqService = new GroqAIService();
        }

        // ============================================
        // 2. READING CONTROLS MANAGEMENT
        // ============================================

        // ============================================
        // TTS Helper (for long text fix)
        // ============================================
        function splitTextIntoChunks(text, maxLength = 200) {
            const chunks = [];
            let currentChunk = '';

            const sentences = text.match(/[^.!?]+[.!?]+|\s*$/g);

            for (let sentence of sentences) {
                if ((currentChunk + sentence).length <= maxLength) {
                    currentChunk += sentence;
                } else {
                    if (currentChunk) chunks.push(currentChunk.trim());
                    currentChunk = sentence;
                }
            }

            if (currentChunk) chunks.push(currentChunk.trim());

            return chunks;
        }


        class ReadingManager {
            constructor() {
                this.isReading = false;
                this.isPaused = false;
                this.currentUtterance = null;
                this.volume = 1.0;
                this.readingProgress = 0;
                this.updateInterval = null;
            }

            init() {
                this.setupEventListeners();
                this.updateUI();
                this.loadVolume();
            }

            setupEventListeners() {
                const playBtn = document.getElementById('playReadingBtn');
                const pauseBtn = document.getElementById('pauseReadingBtn');
                const replayBtn = document.getElementById('replayReadingBtn');
                const volumeSlider = document.getElementById('volumeSlider');

                if (playBtn) playBtn.addEventListener('click', () => this.toggleReading());
                if (pauseBtn) pauseBtn.addEventListener('click', () => this.pauseReading());
                if (replayBtn) replayBtn.addEventListener('click', () => this.replayReading());
                if (volumeSlider) volumeSlider.addEventListener('input', (e) => this.setVolume(e.target.value));

                document.addEventListener('aiResponseUpdated', () => {
                    const autoReadToggle = document.getElementById('autoReadToggle');
                    if (autoReadToggle && autoReadToggle.checked) {
                        setTimeout(() => this.startReading(), 1000);
                    }
                });
            }

            loadVolume() {
                const savedVolume = localStorage.getItem('janSevaVolume');
                if (savedVolume) {
                    this.volume = parseFloat(savedVolume);
                    const volumeSlider = document.getElementById('volumeSlider');
                    if (volumeSlider) {
                        volumeSlider.value = this.volume;
                    }
                }
            }

            toggleReading() {
                if (this.isReading && !this.isPaused) {
                    this.pauseReading();
                } else if (this.isReading && this.isPaused) {
                    this.resumeReading();
                } else {
                    this.startReading();
                }
            }

            startReading() {
                const responseText =
                    document.getElementById('aiResponseText')?.textContent ||
                    document.getElementById('aiResponseContent')?.textContent;

                if (!responseText || responseText.trim() === '') return;

                this.stopReading();

                const chunks = splitTextIntoChunks(responseText, 180);
                let index = 0;

                const speakNextChunk = () => {
                    if (index >= chunks.length) {
                        this.isReading = false;
                        this.isPaused = false;
                        this.currentUtterance = null;
                        this.updateUI();
                        return;
                    }

                    const utterance = new SpeechSynthesisUtterance(chunks[index]);
                    utterance.rate = 0.9;
                    utterance.pitch = 1.0;
                    utterance.volume = this.volume;

                    const currentLang = localStorage.getItem('janSevaLanguage') || 'hi';
                    const langMap = {
                        'hi': 'hi-IN',
                        'en': 'en-US',
                        'mr': 'mr-IN',
                        'te': 'te-IN'
                    };
                    utterance.lang = langMap[currentLang] || 'en-US';

                    utterance.onstart = () => {
                        this.isReading = true;
                        this.isPaused = false;
                        this.currentUtterance = utterance;
                        this.startProgressTracking();
                        this.updateUI();
                    };

                    utterance.onend = () => {
                        index++;
                        speakNextChunk(); // 🔥 next chunk
                    };

                    utterance.onerror = (event) => {
                        console.error('Speech synthesis chunk error:', event);
                        index++;
                        speakNextChunk();
                    };

                    speechSynthesis.speak(utterance);
                };

                speakNextChunk();
            }


            pauseReading() {
                if (this.isReading && !this.isPaused) {
                    speechSynthesis.pause();
                    this.isPaused = true;
                    this.stopProgressTracking();
                    this.updateUI();
                }
            }

            resumeReading() {
                if (this.isReading && this.isPaused) {
                    speechSynthesis.resume();
                    this.isPaused = false;
                    this.startProgressTracking();
                    this.updateUI();
                }
            }

            stopReading() {
                speechSynthesis.cancel();
                this.isReading = false;
                this.isPaused = false;
                this.currentUtterance = null;
                this.stopProgressTracking();
                this.updateUI();
            }

            replayReading() {
                this.stopReading();
                setTimeout(() => this.startReading(), 100);
            }

            setVolume(value) {
                this.volume = parseFloat(value);
                if (this.currentUtterance) {
                    this.currentUtterance.volume = this.volume;
                }
                localStorage.setItem('janSevaVolume', this.volume);
            }

            startProgressTracking() {
                this.stopProgressTracking();
                this.readingProgress = 0;
                this.updateInterval = setInterval(() => {
                    if (this.isReading && !this.isPaused) {
                        this.readingProgress += 0.5;
                        if (this.readingProgress > 100) {
                            this.readingProgress = 100;
                            this.stopProgressTracking();
                        }
                        this.updateProgressBar();
                    }
                }, 100);
            }

            stopProgressTracking() {
                if (this.updateInterval) {
                    clearInterval(this.updateInterval);
                    this.updateInterval = null;
                }
            }

            updateProgressBar() {
                const progressBar = document.getElementById('readingProgressBar');
                if (progressBar) {
                    progressBar.style.width = `${this.readingProgress}%`;
                }
            }

            updateUI() {
                const playBtn = document.getElementById('playReadingBtn');
                const pauseBtn = document.getElementById('pauseReadingBtn');
                const replayBtn = document.getElementById('replayReadingBtn');
                const statusText = document.getElementById('readingStatusText');

                if (!playBtn || !pauseBtn || !replayBtn || !statusText) return;

                if (this.isReading) {
                    if (this.isPaused) {
                        playBtn.innerHTML = '<i class="fas fa-play"></i>';
                        playBtn.title = 'Resume Reading';
                        pauseBtn.disabled = false;
                        statusText.textContent = 'Paused';
                    } else {
                        playBtn.innerHTML = '<i class="fas fa-pause"></i>';
                        playBtn.title = 'Pause Reading';
                        pauseBtn.disabled = false;
                        statusText.textContent = 'Reading...';
                    }
                    playBtn.classList.add('playing');
                    replayBtn.disabled = false;
                } else {
                    playBtn.innerHTML = '<i class="fas fa-play"></i>';
                    playBtn.title = 'Play/Read Aloud';
                    playBtn.classList.remove('playing');
                    pauseBtn.disabled = true;
                    replayBtn.disabled = this.readingProgress === 0;
                    statusText.textContent = this.readingProgress === 0 ? 'Ready to read' : 'Finished reading';
                }

                this.updateProgressBar();
            }
        }

        // Initialize Reading Manager
        const readingManager = new ReadingManager();

        function initReadingControls() {
            readingManager.init();
        }

        // ============================================
        // 3. ENHANCED USER QUERY PROCESSING
        // ============================================
        async function processUserQuery(query) {
            showAIThinking().then(async () => {
                try {
                    const context = {
                        location: 'भारत',
                        language: localStorage.getItem('janSevaLanguage') || 'hi',
                        query: query
                    };

                    const aiResult = await groqService.processQuery(query, context);

                    updateAIResponseSection(aiResult);
                    updateApplicationCards(aiResult);

                    if (document.getElementById('autoReadToggle').checked) {
                        setTimeout(() => readingManager.startReading(), 500);
                    }

                } catch (error) {
                    console.error('Error processing query:', error);
                    fallbackProcessQuery(query);
                }
            });
        }

        function updateAIResponseSection(aiResult) {
            const responseContainer = document.getElementById('aiResponseContent');
            const { naturalResponse, steps, documents, eligibility } = aiResult;

            let html = `<p>${naturalResponse}</p>`;

            if (steps && steps.length > 0) {
                html += `<p><strong>Step-by-Step Guide:</strong></p><ol>`;
                steps.forEach(step => {
                    html += `<li>${step}</li>`;
                });
                html += `</ol>`;
            }

            if (documents && documents.length > 0) {
                html += `<p><strong>Required Documents:</strong></p><ul>`;
                documents.forEach(doc => {
                    html += `<li>${doc}</li>`;
                });
                html += `</ul>`;
            }

            if (eligibility) {
                html += `<p><strong>Eligibility Information:</strong></p><p>${eligibility}</p>`;
            }

            if (responseContainer) {
                responseContainer.innerHTML = html;
            }

            document.dispatchEvent(new Event('aiResponseUpdated'));
        }

        function updateApplicationCards(aiResult) {
            const { processType, serviceType } = aiResult;

            const onlineCard = document.getElementById('onlineCard');
            const offlineCard = document.getElementById('offlineCard');

            if (onlineCard && offlineCard) {
                if (processType === 'online') {
                    onlineCard.style.display = 'block';
                    offlineCard.style.display = 'none';
                } else if (processType === 'offline') {
                    onlineCard.style.display = 'none';
                    offlineCard.style.display = 'block';
                } else {
                    onlineCard.style.display = 'block';
                    offlineCard.style.display = 'block';
                }
            }

            autoSwitchProcessTab(processType);
        }

        function detectLanguage(text) {
            const hindiRegex = /[\u0900-\u097F]/;
            const marathiRegex = /[\u0900-\u097F]/;
            const teluguRegex = /[\u0C00-\u0C7F]/;

            if (hindiRegex.test(text)) return 'hi';
            if (marathiRegex.test(text)) return 'mr';
            if (teluguRegex.test(text)) return 'te';
            return 'en';
        }

        function fallbackProcessQuery(query) {
            const { serviceType, detectedService } = determineServicePath(query);

            updateContext(query, serviceType, detectedService);
            updateAIResponseCards(serviceType, detectedService);

            const fallbackResponse = generateFallbackAIResponse(query, serviceType, detectedService);
            const responseContent = document.getElementById('aiResponseContent');
            if (responseContent) {
                responseContent.innerHTML = `<p>${fallbackResponse}</p>`;
            }

            document.dispatchEvent(new Event('aiResponseUpdated'));

            const autoReadToggle = document.getElementById('autoReadToggle');
            if (autoReadToggle && autoReadToggle.checked) {
                setTimeout(() => readingManager.startReading(), 1000);
            }

            const generateTokenBtn = document.getElementById('generateTokenBtn');
            if (generateTokenBtn) {
                if (serviceType === 'offline') {
                    generateTokenBtn.style.display = 'flex';
                } else {
                    generateTokenBtn.style.display = 'none';
                }
            }
        }

        function generateFallbackAIResponse(query, serviceType, detectedService) {
            const responses = {
                online: `I can help you get a ${detectedService}. Good news - this service is available online! You can apply from home without visiting any office. Here's what you need to do:\n\n1. Visit the official government portal for ${detectedService}\n2. Login with your Aadhaar number\n3. Fill the online application form\n4. Upload scanned copies of required documents\n5. Submit and note your application number\n\nYou'll receive updates via SMS. The process usually takes 7-15 working days.`,
                offline: `For ${detectedService}, you need to visit the government office for document verification. Here's the complete process:\n\n1. Prepare all original documents plus 2 photocopies\n2. Visit the nearest Tehsil/District office\n3. Get a token from the counter\n4. Submit your application to the concerned officer\n5. Get acknowledgement receipt with tracking number\n\nI can generate a smart token for you to reduce waiting time at the office.`,
                hybrid: `For ${detectedService}, you can use the hybrid process - start online and finish at office. This is the most efficient way:\n\n1. Begin your application on the official portal\n2. Fill basic details and upload documents\n3. Schedule appointment for biometric verification\n4. Visit office with original documents\n5. Complete verification and get confirmation\n\nThis approach saves time and ensures your application is processed faster.`
            };

            return responses[serviceType] || `I understand you need help with ${detectedService}. Let me guide you through the complete process step by step.`;
        }

        // ============================================
        // 4. LANDSCAPE TOKEN CARD SYSTEM
        // ============================================
        function updateLandscapeTokenCard(tokenData) {
            const tokenCard = document.getElementById('tokenCard');
            if (!tokenCard || !tokenData) return;

            // Update token number
            const tokenNumber = document.getElementById('tokenNumberLandscape');
            if (tokenNumber) tokenNumber.textContent = tokenData.tokenNumber || 'JS-1045';

            // Update service type
            const serviceType = document.getElementById('serviceTypeLandscape');
            if (serviceType) serviceType.textContent = tokenData.service || 'Government Service';

            // Update crowd status
            const crowdStatus = document.getElementById('crowdStatusLandscape');
            if (crowdStatus) {
                const statusClass = tokenData.crowdStatus?.includes('Low') ? 'low' :
                    tokenData.crowdStatus?.includes('Medium') ? 'medium' : 'high';
                crowdStatus.className = `crowd-status-landscape ${statusClass}`;
                crowdStatus.querySelector('span').textContent = tokenData.crowdStatus || 'Medium Crowd';
            }

            // Update office
            const office = document.getElementById('officeLandscape');
            if (office) office.textContent = tokenData.office || 'Tehsil Office, Raipur';

            // Update date
            const date = document.getElementById('dateLandscape');
            if (date) date.textContent = tokenData.date || '15 March 2024';

            // Update time slot
            const timeSlot = document.getElementById('timeSlotLandscape');
            if (timeSlot) timeSlot.textContent = tokenData.timeSlot || '11:30 AM – 12:00 PM';

            // Update wait time
            const waitTime = document.getElementById('waitTimeLandscape');
            if (waitTime) waitTime.textContent = tokenData.estimatedWait || '15-20 minutes';

            // Update validity
            const validity = document.getElementById('validityLandscape');
            if (validity) validity.textContent = tokenData.validity || '30 minutes from scheduled time';

            // Add success message
            const existingMsg = tokenCard.querySelector('.token-success-msg');
            if (existingMsg) {
                existingMsg.remove();
            }

            const successMsg = document.createElement('div');
            successMsg.className = 'token-success-msg';
            successMsg.style.cssText = `
                background: #e8f5e9;
                color: #2e7d32;
                padding: 15px;
                border-radius: 10px;
                margin: 0 0 20px 0;
                border-left: 4px solid #4caf50;
                font-weight: 600;
                display: flex;
                align-items: center;
                gap: 10px;
                animation: fadeIn 0.5s ease;
            `;
            successMsg.innerHTML = `
                <i class="fas fa-check-circle"></i>
                <div>
                    <div>Token generated successfully!</div>
                    <small>Your appointment is confirmed. Please save this token.</small>
                </div>
            `;

            tokenCard.insertBefore(successMsg, tokenCard.firstChild);

            // Add to active tokens
            addToActiveTokens(tokenData);
        }

        function addToActiveTokens(tokenData) {
            const activeTokensGrid = document.getElementById('activeTokensGrid');
            if (!activeTokensGrid) return;

            // Create new token card
            const tokenCard = document.createElement('div');
            tokenCard.className = 'token-card-landscape';
            tokenCard.style.animation = 'fadeInUp 0.5s ease forwards';

            const statusClass = tokenData.crowdStatus?.includes('Low') ? 'low' :
                tokenData.crowdStatus?.includes('Medium') ? 'medium' : 'high';

            tokenCard.innerHTML = `
                <div class="token-row-top">
                    <div class="token-number-landscape">
                        <i class="fas fa-ticket-alt"></i>
                        <span>${tokenData.tokenNumber || 'JS-' + Math.floor(1000 + Math.random() * 9000)}</span>
                    </div>
                    <div class="service-type-landscape">
                        <i class="fas fa-file-alt"></i>
                        <span>${tokenData.service || 'Government Service'}</span>
                    </div>
                    <div class="crowd-status-landscape ${statusClass}">
                        <i class="fas fa-users"></i>
                        <span>${tokenData.crowdStatus || 'Medium Crowd'}</span>
                    </div>
                </div>
                
                <div class="token-row-middle">
                    <div class="office-info-landscape">
                        <div class="info-label">
                            <i class="fas fa-building"></i> Office
                        </div>
                        <div class="info-value">
                            ${tokenData.office || 'Tehsil Office, Raipur'}
                        </div>
                    </div>
                    <div class="date-info-landscape">
                        <div class="info-label">
                            <i class="fas fa-calendar-alt"></i> Date
                        </div>
                        <div class="info-value">
                            ${tokenData.date || '15 March 2024'}
                        </div>
                    </div>
                    <div class="time-info-landscape">
                        <div class="info-label">
                            <i class="fas fa-clock"></i> Time Slot
                        </div>
                        <div class="info-value">
                            ${tokenData.timeSlot || '11:30 AM – 12:00 PM'}
                        </div>
                    </div>
                </div>
                
                <div class="token-row-bottom">
                    <div class="wait-time-landscape">
                        <div class="info-label">
                            <i class="fas fa-hourglass-half"></i> Wait Time
                        </div>
                        <div class="info-value">
                            ${tokenData.estimatedWait || '15-20 minutes'}
                        </div>
                    </div>
                    <div class="validity-landscape">
                        <div class="info-label">
                            <i class="fas fa-shield-alt"></i> Validity
                        </div>
                        <div class="info-value">
                            30 minutes from scheduled time
                        </div>
                    </div>
                    <div class="instructions-landscape">
                        <h4><i class="fas fa-info-circle"></i> Instructions</h4>
                        <ul class="instructions-list">
                            <li>Carry original documents + 2 photocopies</li>
                            <li>Reach office 10 minutes before time slot</li>
                            <li>Show token at designated counter</li>
                        </ul>
                    </div>
                </div>
                
                <div class="token-actions-landscape">
                    <button class="btn-download-token" onclick="downloadToken('${tokenData.tokenNumber || 'JS-1045'}')">
                        <i class="fas fa-download"></i> Download PDF
                    </button>
                    <button class="btn-save-token" onclick="saveToken('${tokenData.tokenNumber || 'JS-1045'}')">
                        <i class="fas fa-mobile-alt"></i> Save on Phone
                    </button>
                </div>
            `;

            // Add to the beginning of active tokens
            activeTokensGrid.insertBefore(tokenCard, activeTokensGrid.firstChild);

            // Limit to 5 active tokens
            const tokens = activeTokensGrid.querySelectorAll('.token-card-landscape');
            if (tokens.length > 5) {
                activeTokensGrid.removeChild(tokens[tokens.length - 1]);
            }
        }

        function downloadToken(tokenNumber) {
            showToast(`Token ${tokenNumber} downloaded as PDF`, 'success');
        }

        function saveToken(tokenNumber) {
            showToast(`Token ${tokenNumber} saved to your device`, 'success');
        }

        // ============================================
        // 5. ALL EXISTING FUNCTIONS (preserved)
        // ============================================
        let recognition = null;
        let isListening = false;
        let currentSpeechLanguage = 'hi-IN';

        function initEnhancedFeatures() {
            initSpeechRecognition();
            initTextToSpeech();
            initLanguageSupport();
            initProcessGuide();
            initLocalStorage();
        }

        function initSpeechRecognition() {
            if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                recognition = new SpeechRecognition();

                recognition.continuous = false;
                recognition.interimResults = true;
                recognition.maxAlternatives = 1;

                recognition.onstart = function () {
                    isListening = true;
                    const voiceInputBtn = document.getElementById('voiceInputBtn');
                    if (voiceInputBtn) {
                        voiceInputBtn.classList.add('listening');
                        voiceInputBtn.classList.remove('success', 'processing');
                    }
                    const voiceWave = document.getElementById('voiceWave');
                    if (voiceWave) voiceWave.classList.add('active');
                    const voiceButtonText = document.getElementById('voiceButtonText');
                    if (voiceButtonText) voiceButtonText.textContent = 'Listening... Speak now';
                };

                recognition.onresult = function (event) {
                    let transcript = '';
                    let isFinal = false;

                    for (let i = event.resultIndex; i < event.results.length; i++) {
                        transcript += event.results[i][0].transcript;
                        isFinal = event.results[i].isFinal;
                    }

                    const textInputArea = document.getElementById('textInputArea');
                    if (textInputArea) {
                        textInputArea.value = transcript;
                    }

                    if (isFinal) {
                        setTimeout(() => {
                            recognition.stop();
                        }, 500);
                    }
                };

                recognition.onend = function () {
                    isListening = false;
                    const voiceInputBtn = document.getElementById('voiceInputBtn');
                    if (voiceInputBtn) {
                        voiceInputBtn.classList.remove('listening');
                        voiceInputBtn.classList.add('processing');
                    }
                    const voiceWave = document.getElementById('voiceWave');
                    if (voiceWave) voiceWave.classList.remove('active');
                    const voiceButtonText = document.getElementById('voiceButtonText');
                    if (voiceButtonText) voiceButtonText.textContent = 'Processing...';

                    setTimeout(() => {
                        const voiceInputBtn = document.getElementById('voiceInputBtn');
                        if (voiceInputBtn) {
                            voiceInputBtn.classList.remove('processing');
                            voiceInputBtn.classList.add('success');
                        }
                        const voiceButtonText = document.getElementById('voiceButtonText');
                        if (voiceButtonText) voiceButtonText.textContent = 'Done! Click to speak again';

                        const textInputArea = document.getElementById('textInputArea');
                        const query = textInputArea ? textInputArea.value.trim() : '';
                        if (query) {
                            processUserQuery(query);
                        }

                        setTimeout(() => {
                            const voiceInputBtn = document.getElementById('voiceInputBtn');
                            if (voiceInputBtn) {
                                voiceInputBtn.classList.remove('success');
                            }
                            const voiceButtonText = document.getElementById('voiceButtonText');
                            if (voiceButtonText) voiceButtonText.textContent = 'Click to Speak';
                        }, 2000);
                    }, 1000);
                };

                recognition.onerror = function (event) {
                    isListening = false;
                    const voiceInputBtn = document.getElementById('voiceInputBtn');
                    if (voiceInputBtn) {
                        voiceInputBtn.classList.remove('listening', 'processing');
                    }
                    const voiceWave = document.getElementById('voiceWave');
                    if (voiceWave) voiceWave.classList.remove('active');
                    const voiceButtonText = document.getElementById('voiceButtonText');
                    if (voiceButtonText) voiceButtonText.textContent = 'Click to Speak';

                    if (event.error === 'not-allowed') {
                        showToast('Microphone access denied. Please enable microphone permissions.', 'error');
                    } else if (event.error === 'no-speech') {
                        showToast('No speech detected. Please try again.', 'error');
                    } else {
                        showToast('Speech recognition error. Please try again.', 'error');
                    }
                };
            } else {
                const voiceInputBtn = document.getElementById('voiceInputBtn');
                if (voiceInputBtn) {
                    voiceInputBtn.disabled = true;
                }
                const voiceButtonText = document.getElementById('voiceButtonText');
                if (voiceButtonText) {
                    voiceButtonText.textContent = 'Voice Not Supported';
                }
                showToast('Speech recognition is not supported in your browser. Please use Chrome or Edge.', 'warning');
            }
        }

        function setSpeechRecognitionLanguage(langCode) {
            const langMap = {
                'hi': 'hi-IN',
                'en': 'en-IN',
                'mr': 'mr-IN',
                'te': 'te-IN'
            };
            currentSpeechLanguage = langMap[langCode] || 'en-IN';
            if (recognition) {
                recognition.lang = currentSpeechLanguage;
            }
        }

        function toggleVoiceInput() {
            if (!recognition) {
                initSpeechRecognition();
            }

            if (isListening) {
                recognition.stop();
            } else {
                const textInputArea = document.getElementById('textInputArea');
                if (textInputArea) {
                    textInputArea.value = '';
                }
                const savedLang = localStorage.getItem('janSevaLanguage') || 'hi';
                setSpeechRecognitionLanguage(savedLang);
                recognition.start();
            }
        }

        let speechSynthesis = window.speechSynthesis;
        let isSpeaking = false;
        let autoReadEnabled = true;

        function initTextToSpeech() {
            if (!speechSynthesis) {
                const autoReadToggle = document.getElementById('autoReadToggle');
                const autoReadToggle2 = document.getElementById('autoReadToggle2');
                if (autoReadToggle) autoReadToggle.disabled = true;
                if (autoReadToggle2) autoReadToggle2.disabled = true;
                document.querySelectorAll('.response-speak-btn').forEach(btn => btn.disabled = true);
                return;
            }

            const autoReadToggle = document.getElementById('autoReadToggle');
            if (autoReadToggle) {
                autoReadToggle.addEventListener('change', function () {
                    autoReadEnabled = this.checked;
                    localStorage.setItem('janSevaAutoRead', this.checked);
                });
            }

            const autoReadToggle2 = document.getElementById('autoReadToggle2');
            if (autoReadToggle2) {
                autoReadToggle2.addEventListener('change', function () {
                    autoReadEnabled = this.checked;
                    localStorage.setItem('janSevaAutoRead', this.checked);
                });
            }

            const savedAutoRead = localStorage.getItem('janSevaAutoRead');
            if (savedAutoRead !== null) {
                autoReadEnabled = savedAutoRead === 'true';
                if (autoReadToggle) autoReadToggle.checked = autoReadEnabled;
                if (autoReadToggle2) autoReadToggle2.checked = autoReadEnabled;
            }
        }

        const translations = {
            'hi': {
                heroTitle: 'जन सेवा साथी - सरकारी सेवाओं के लिए आपका एआई गाइड',
                heroSubtitle: 'स्थानीय भाषा में योजना की जानकारी, दस्तावेज़ सूची और स्मार्ट टोकन प्राप्त करें। प्रतीक्षा समय कम करें, सटीक जानकारी पाएं और सेवाओं तक तेजी से पहुंचें।',
                aiPageTitle: 'एआई सहायक',
                inputQueryText: 'अपना प्रश्न दर्ज करें',
                voiceButtonText: 'बोलने के लिए क्लिक करें',
                orText: 'या',
                speakButtonText: 'बोलें',
                sendButtonText: 'टेक्स्ट भेजें',
                autoReadLabel: 'एआई प्रतिक्रिया स्वतः पढ़ें:',
                aiUnderstandingText: 'एआई समझ',
                serviceDetectedLabel: 'सेवा पहचानी गई:',
                userLocationLabel: 'उपयोगकर्ता स्थान:',
                categoryLabel: 'श्रेणी:',
                priorityLabel: 'प्राथमिकता:',
                detectedLanguageLabel: 'पहचानी गई भाषा:',
                onlineAvailableText: 'ऑनलाइन आवेदन उपलब्ध',
                stepsTitle: 'चरण:',
                requiredDocsTitle: 'आवश्यक दस्तावेज़:',
                goToPortalText: 'आधिकारिक पोर्टल पर जाएं',
                officeRequiredText: 'कार्यालय भ्रमण आवश्यक',
                officeDetailsTitle: 'कार्यालय विवरण:',
                requiredDocsTitle2: 'आवश्यक दस्तावेज़ (मूल + प्रतियां):',
                generateTokenText: 'टोकन जनरेट करें',
                processGuideTitle: 'प्रक्रिया मार्गदर्शिका',
                tokenTitle: 'स्मार्ट टोकन प्रणाली',
                tokenSubtitle: 'अब लंबी कतारों में इंतज़ार नहीं। रीयल-टाइम भीड़ की जानकारी और अनुमानित प्रतीक्षा समय के साथ निर्धारित अपॉइंटमेंट प्राप्त करें।',
                timeSlotLabel: 'अनुमानित समय स्लॉट',
                crowdStatusLabel: 'भीड़ की स्थिति',
                expectedWaitLabel: 'अपेक्षित प्रतीक्षा',
                serviceTypeLabel: 'सेवा प्रकार',
                instructionsTitle: 'महत्वपूर्ण निर्देश',
                downloadTokenText: 'टोकन डाउनलोड करें (PDF)',
                saveTokenText: 'फोन पर सेव करें',
                listenButtonText: 'एआई प्रतिक्रिया सुनें',
                speakInsteadText: 'टाइप करने के बजाय बोलें',
                simpleModeLabel: 'सरल मोड सक्षम करें:'
            },
            'en': {
                heroTitle: 'Jan Seva Saathi – Your AI Guide for Government Services',
                heroSubtitle: 'Get scheme info, document list, and smart tokens in your local language. Reduce wait times, get accurate information, and access services faster.',
                aiPageTitle: 'AI Assistant',
                inputQueryText: 'Input Your Query',
                voiceButtonText: 'Click to Speak',
                orText: 'OR',
                speakButtonText: 'Speak',
                sendButtonText: 'Send Text',
                autoReadLabel: 'Auto Read AI Response:',
                aiUnderstandingText: 'AI Understanding',
                serviceDetectedLabel: 'Service Detected:',
                userLocationLabel: 'User Location:',
                categoryLabel: 'Category:',
                priorityLabel: 'Priority:',
                detectedLanguageLabel: 'Detected Language:',
                onlineAvailableText: 'Online Application Available',
                stepsTitle: 'Steps:',
                requiredDocsTitle: 'Required Documents:',
                goToPortalText: 'Go to Official Portal',
                officeRequiredText: 'Office Visit Required',
                officeDetailsTitle: 'Office Details:',
                requiredDocsTitle2: 'Required Documents (Originals + Copies):',
                generateTokenText: 'Generate Token',
                processGuideTitle: 'Process Guide',
                tokenTitle: 'Smart Token System',
                tokenSubtitle: 'No more waiting in long queues. Get scheduled appointments with real-time crowd information and estimated wait times.',
                timeSlotLabel: 'Estimated Time Slot',
                crowdStatusLabel: 'Crowd Status',
                expectedWaitLabel: 'Expected Wait',
                serviceTypeLabel: 'Service Type',
                instructionsTitle: 'Important Instructions',
                downloadTokenText: 'Download Token (PDF)',
                saveTokenText: 'Save on Phone',
                listenButtonText: 'Listen to AI Response',
                speakInsteadText: 'Speak Instead of Typing',
                simpleModeLabel: 'Enable Simple Mode:'
            }
        };

        function initLanguageSupport() {
            const languageOptions = document.querySelectorAll('.language-option');

            languageOptions.forEach(option => {
                option.addEventListener('click', function () {
                    const langCode = this.getAttribute('data-lang');
                    changeLanguage(langCode);
                });
            });

            const savedLang = localStorage.getItem('janSevaLanguage') || 'hi';
            changeLanguage(savedLang);
        }

        function changeLanguage(langCode) {
            document.querySelectorAll('.language-option').forEach(option => {
                option.classList.remove('active');
            });

            const activeOption = document.querySelector(`.language-option[data-lang="${langCode}"]`);
            if (activeOption) {
                activeOption.classList.add('active');
            }

            setSpeechRecognitionLanguage(langCode);
            updateLanguageContent(langCode);

            const langNames = {
                'hi': 'Hindi',
                'en': 'English',
                'mr': 'Marathi',
                'te': 'Telugu'
            };
            const detectedLanguageValue = document.getElementById('detectedLanguageValue');
            if (detectedLanguageValue) {
                detectedLanguageValue.textContent = langNames[langCode] || 'English';
            }

            localStorage.setItem('janSevaLanguage', langCode);
            showToast(`Language changed to ${langNames[langCode] || 'English'}`, 'success');
        }

        function updateLanguageContent(langCode) {
            const translation = translations[langCode] || translations['en'];

            Object.keys(translation).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = translation[key];
                    } else {
                        element.textContent = translation[key];
                    }
                }
            });
        }

        function initProcessGuide() {
            const processTabs = document.querySelectorAll('.process-tab');
            const tabContents = document.querySelectorAll('.process-tab-content');

            processTabs.forEach(tab => {
                tab.addEventListener('click', function () {
                    const tabId = this.getAttribute('data-tab');

                    processTabs.forEach(t => {
                        t.classList.remove('active');
                        t.setAttribute('aria-selected', 'false');
                    });
                    this.classList.add('active');
                    this.setAttribute('aria-selected', 'true');

                    tabContents.forEach(content => {
                        content.classList.remove('active');
                        content.setAttribute('hidden', 'true');
                        if (content.id === tabId + 'Process') {
                            content.classList.add('active');
                            content.removeAttribute('hidden');
                        }
                    });
                });
            });
        }

        function autoSwitchProcessTab(serviceType) {
            const tabMap = {
                'online': 'online',
                'offline': 'offline',
                'hybrid': 'hybrid'
            };

            const tabId = tabMap[serviceType] || 'online';
            const tabToClick = document.querySelector(`.process-tab[data-tab="${tabId}"]`);

            if (tabToClick) {
                tabToClick.click();
            }
        }

        const serviceDecisionMatrix = {
            'online': {
                services: ['ration card', 'pan card', 'aadhaar update', 'voter id', 'passport application', 'driving license renewal', 'electricity bill', 'water bill', 'property tax', 'pm awas yojana', 'ayushman bharat', 'pension registration'],
                priority: 'Recommended by AI'
            },
            'offline': {
                services: ['caste certificate', 'income certificate', 'domicile certificate', 'birth certificate', 'death certificate', 'marriage certificate', 'land mutation', 'court case', 'police verification'],
                priority: 'Office Visit Required'
            },
            'hybrid': {
                services: ['new driving license', 'vehicle registration', 'business registration', 'gst registration'],
                priority: 'Start Online, Finish in Office'
            }
        };

        function determineServicePath(userQuery) {
            const queryLower = userQuery.toLowerCase();
            let detectedService = '';
            let serviceType = 'online';

            for (const [type, data] of Object.entries(serviceDecisionMatrix)) {
                for (const service of data.services) {
                    if (queryLower.includes(service)) {
                        detectedService = service;
                        serviceType = type;
                        break;
                    }
                }
                if (detectedService) break;
            }

            if (!detectedService) {
                if (queryLower.includes('certificate') || queryLower.includes('mutation') || queryLower.includes('verification')) {
                    serviceType = 'offline';
                    detectedService = 'Document Certificate';
                } else if (queryLower.includes('bill') || queryLower.includes('renewal') || queryLower.includes('update')) {
                    serviceType = 'online';
                    detectedService = 'Online Service';
                } else {
                    detectedService = 'Government Service';
                }
            }

            return { serviceType, detectedService };
        }

        function showAIThinking() {
            const aiResponsePanel = document.querySelector('.ai-response-panel');
            if (!aiResponsePanel) return Promise.resolve();

            const thinkingOverlay = document.createElement('div');
            thinkingOverlay.id = 'aiThinkingOverlay';
            thinkingOverlay.style.cssText = `
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(255, 255, 255, 0.9);
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                z-index: 100;
                border-radius: 15px;
                backdrop-filter: blur(5px);
            `;

            thinkingOverlay.innerHTML = `
                <div style="font-size: 48px; margin-bottom: 20px; animation: float 2s ease-in-out infinite;">🤖</div>
                <h3 style="color: var(--primary-blue); margin-bottom: 10px;">AI is analyzing your request...</h3>
                <p style="color: var(--dark-gray); text-align: center; max-width: 300px;">Understanding your query<br>Checking eligibility<br>Finding best solution</p>
                <div class="thinking-dots" style="margin-top: 20px;">
                    <span style="animation: dot1 1.5s infinite; font-size: 24px;">.</span>
                    <span style="animation: dot2 1.5s infinite; font-size: 24px;">.</span>
                    <span style="animation: dot3 1.5s infinite; font-size: 24px;">.</span>
                </div>
            `;

            aiResponsePanel.style.position = 'relative';
            aiResponsePanel.appendChild(thinkingOverlay);

            return new Promise(resolve => {
                setTimeout(() => {
                    if (thinkingOverlay.parentNode) {
                        thinkingOverlay.parentNode.removeChild(thinkingOverlay);
                    }
                    resolve();
                }, 1500 + Math.random() * 1000);
            });
        }

        function setupTokenGeneratorForm() {
            const today = new Date().toISOString().split('T')[0];
            const dateInput = document.getElementById('preferredDate');
            if (dateInput) {
                dateInput.min = today;
                dateInput.value = today;
            }

            const tokenForm = document.getElementById('tokenGeneratorForm');
            if (tokenForm) {
                tokenForm.addEventListener('submit', function (e) {
                    e.preventDefault();

                    const serviceType = document.getElementById('serviceType').value;
                    const office = document.getElementById('officeSelect').value;
                    const date = document.getElementById('preferredDate').value;
                    const timeSlot = document.getElementById('timeSlot').value;
                    const mobile = document.getElementById('mobileNumber').value;

                    if (!serviceType || !office || !date || !timeSlot || !mobile) {
                        showToast('Please fill all required fields', 'warning');
                        return;
                    }

                    if (!/^[0-9]{10}$/.test(mobile)) {
                        showToast('Please enter a valid 10-digit mobile number', 'warning');
                        return;
                    }

                    const submitBtn = tokenForm.querySelector('.token-generate-btn');
                    const originalText = submitBtn.innerHTML;
                    submitBtn.innerHTML = '<span class="loading-spinner"></span> Generating...';
                    submitBtn.disabled = true;

                    setTimeout(() => {
                        const tokenData = generateTokenFromForm(serviceType, office, date, timeSlot, mobile);
                        updateLandscapeTokenCard(tokenData);

                        setTimeout(() => {
                            const tokenCard = document.getElementById('tokenCard');
                            if (tokenCard) {
                                tokenCard.scrollIntoView({ behavior: 'smooth' });
                            }
                        }, 100);

                        showToast('Smart token generated successfully! SMS sent to ' + mobile, 'success');
                        submitBtn.innerHTML = originalText;
                        submitBtn.disabled = false;

                        // Reset form
                        tokenForm.reset();
                        if (dateInput) {
                            dateInput.value = today;
                        }
                    }, 1500);
                });
            }
        }

        function generateTokenFromForm(serviceType, office, date, timeSlot, mobile) {
            const officeNames = {
                'tehsil-raipur': 'Tehsil Office, Raipur',
                'municipal-delhi': 'Municipal Corporation, Delhi',
                'collectorate-mumbai': 'District Collectorate, Mumbai',
                'csc-bangalore': 'CSC Center, Bangalore',
                'panchayat-pune': 'Gram Panchayat Office, Pune'
            };

            const serviceNames = {
                'ration': 'Ration Card',
                'birth': 'Birth Certificate',
                'income': 'Income Certificate',
                'caste': 'Caste Certificate',
                'pension': 'Pension Application',
                'aadhaar': 'Aadhaar Update',
                'voter': 'Voter ID',
                'other': 'Government Service'
            };

            const timeSlots = {
                '9-10': '9:00 AM – 10:00 AM',
                '10-11': '10:00 AM – 11:00 AM',
                '11-12': '11:00 AM – 12:00 PM',
                '12-1': '12:00 PM – 1:00 PM',
                '2-3': '2:00 PM – 3:00 PM',
                '3-4': '3:00 PM – 4:00 PM',
                '4-5': '4:00 PM – 5:00 PM'
            };

            const dateObj = new Date(date);
            const formattedDate = dateObj.toLocaleDateString('en-IN', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });

            const crowdOptions = ['🟢 Low Crowd', '🟡 Medium Crowd', '🔴 High Crowd'];
            const randomCrowd = crowdOptions[Math.floor(Math.random() * crowdOptions.length)];

            return {
                tokenNumber: 'JS-' + Math.floor(1000 + Math.random() * 9000),
                office: officeNames[office] || office,
                timeSlot: timeSlots[timeSlot] || timeSlot,
                date: formattedDate,
                service: serviceNames[serviceType] || 'Government Service',
                crowdStatus: randomCrowd,
                estimatedWait: Math.floor(Math.random() * 30) + 5 + ' minutes',
                validity: '30 minutes from scheduled time',
                mobile: mobile
            };
        }

        const schemeEligibilityData = {
            'Ayushman Bharat': {
                minAge: 0,
                maxAge: 120,
                income: ['low', 'medium'],
                categories: ['general', 'obc', 'sc', 'st'],
                states: ['chhattisgarh', 'maharashtra', 'delhi', 'karnataka', 'tamilnadu'],
                matchScore: 0,
                description: 'Health insurance scheme providing coverage of ₹5 lakh per family per year for secondary and tertiary care hospitalization.',
                documents: ['Aadhaar Card', 'Ration Card', 'Income Certificate'],
                link: 'https://pmjay.gov.in'
            },
            'PM Awas Yojana': {
                minAge: 18,
                maxAge: 120,
                income: ['low', 'medium'],
                categories: ['general', 'obc', 'sc', 'st'],
                states: ['chhattisgarh', 'maharashtra', 'delhi'],
                matchScore: 0,
                description: 'Housing for All by 2022 mission. Provides financial assistance for construction of pucca house.',
                documents: ['Aadhaar Card', 'Land Proof', 'Bank Account', 'Income Certificate'],
                link: 'https://pmaymis.gov.in'
            },
            'PM Kisan Samman': {
                minAge: 18,
                maxAge: 120,
                income: ['low', 'medium'],
                categories: ['general', 'obc', 'sc', 'st'],
                states: ['chhattisgarh', 'maharashtra', 'delhi', 'karnataka', 'tamilnadu'],
                matchScore: 0,
                description: 'Income support scheme for farmers providing ₹6,000 per year in three equal installments.',
                documents: ['Aadhaar Card', 'Land Records', 'Bank Account'],
                link: 'https://pmkisan.gov.in'
            }
        };

        function checkEligibility() {
            const age = parseInt(document.getElementById('ageInput').value) || 0;
            const income = document.getElementById('incomeInput').value;
            const category = document.getElementById('categoryInput').value;
            const state = document.getElementById('stateInput').value;

            if (!age || !income || !category || !state) {
                showToast('Please fill all fields to check eligibility.', 'warning');
                return;
            }

            const checkBtn = document.getElementById('checkEligibilityBtn');
            const originalText = checkBtn.innerHTML;
            checkBtn.innerHTML = '<span class="loading-spinner"></span> Checking...';
            checkBtn.disabled = true;

            setTimeout(() => {
                Object.keys(schemeEligibilityData).forEach(scheme => {
                    let score = 0;
                    const data = schemeEligibilityData[scheme];

                    if (age >= data.minAge && age <= data.maxAge) {
                        score += 30;
                    }

                    if (data.income.includes(income)) {
                        score += 25;
                    }

                    if (data.categories.includes(category)) {
                        score += 25;
                    }

                    if (data.states.includes(state)) {
                        score += 20;
                    }

                    data.matchScore = score;
                });

                displayEligibleSchemes();
                checkBtn.innerHTML = originalText;
                checkBtn.disabled = false;

                showToast('Eligibility check completed! Found ' +
                    Object.keys(schemeEligibilityData).filter(s => schemeEligibilityData[s].matchScore > 50).length +
                    ' eligible schemes.', 'success');
            }, 1500);
        }

        function displayEligibleSchemes() {
            const container = document.getElementById('eligibleSchemesGrid');
            if (!container) return;

            container.innerHTML = '';

            const sortedSchemes = Object.keys(schemeEligibilityData)
                .map(scheme => ({ name: scheme, ...schemeEligibilityData[scheme] }))
                .sort((a, b) => b.matchScore - a.matchScore)
                .filter(scheme => scheme.matchScore > 50);

            if (sortedSchemes.length === 0) {
                container.innerHTML = '<p style="color: var(--dark-gray); text-align: center; padding: 20px;">No eligible schemes found based on your profile. Try adjusting your criteria.</p>';
            } else {
                sortedSchemes.forEach(scheme => {
                    const matchClass = scheme.matchScore >= 80 ? 'match-high' :
                        scheme.matchScore >= 60 ? 'match-medium' : 'match-low';

                    const card = document.createElement('div');
                    card.className = 'eligible-scheme-card';
                    card.innerHTML = `
                        <span class="match-percentage ${matchClass}">${scheme.matchScore}% Match</span>
                        <h4 style="color: var(--primary-blue); margin-bottom: 8px;">${scheme.name}</h4>
                        <p style="font-size: 14px; color: var(--dark-gray); margin-bottom: 10px;">
                            ${scheme.description}
                        </p>
                        <div style="font-size: 12px; color: var(--dark-gray); margin-bottom: 10px;">
                            <div><strong>Age:</strong> ${scheme.minAge}-${scheme.maxAge} years</div>
                            <div><strong>Documents:</strong> ${scheme.documents.join(', ')}</div>
                        </div>
                        <button class="btn-action btn-send" onclick="applyForScheme('${scheme.name}')" style="width: 100%; padding: 8px;">
                            <i class="fas fa-arrow-right"></i> Apply Now
                        </button>
                    `;
                    container.appendChild(card);
                });
            }

            const recommendedSchemes = document.getElementById('recommendedSchemes');
            if (recommendedSchemes) {
                recommendedSchemes.style.display = 'block';
            }
        }

        function applyForScheme(schemeName) {
            const scheme = schemeEligibilityData[schemeName];
            if (scheme && scheme.link) {
                showToast(`Redirecting to ${schemeName} application portal...`, 'success');
                setTimeout(() => {
                    window.open(scheme.link, '_blank');
                }, 1000);
            } else {
                showToast('Application link not available. Please visit the official government portal.', 'warning');
            }
        }

        function initLocalStorage() {
            if (!localStorage.getItem('janSevaLanguage')) {
                localStorage.setItem('janSevaLanguage', 'hi');
            }
            if (!localStorage.getItem('janSevaAutoRead')) {
                localStorage.setItem('janSevaAutoRead', 'true');
            }
            if (!localStorage.getItem('janSevaTheme')) {
                localStorage.setItem('janSevaTheme', 'light');
            }
        }

        function initTheme() {
            const savedTheme = localStorage.getItem('janSevaTheme') || 'light';
            setTheme(savedTheme);
            updateThemeIcon(savedTheme);

            const themeToggle = document.getElementById('themeToggle');
            if (themeToggle) {
                themeToggle.checked = savedTheme === 'dark';
                themeToggle.addEventListener('change', function () {
                    toggleTheme();
                });
            }
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';

            setTheme(newTheme);
            updateThemeIcon(newTheme);
            localStorage.setItem('janSevaTheme', newTheme);

            const themeToggle = document.getElementById('themeToggle');
            if (themeToggle) {
                themeToggle.checked = newTheme === 'dark';
            }

            showToast(`${newTheme === 'dark' ? 'Dark' : 'Light'} mode enabled`, 'success');
        }

        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
        }

        function updateThemeIcon(theme) {
            const themeIcon = document.getElementById('themeIcon');
            if (theme === 'dark') {
                themeIcon.className = 'fas fa-sun';
            } else {
                themeIcon.className = 'fas fa-moon';
            }
        }

        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');

            if (!toast || !toastMessage) return;

            toastMessage.textContent = message;
            toast.className = 'toast';
            toast.classList.add(type);

            setTimeout(() => {
                toast.classList.add('show');
            }, 100);

            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    toast.className = 'toast';
                }, 300);
            }, 5000);
        }

        function toggleMenu() {
            const menu = document.querySelector('.nav-menu');
            if (!menu) return;

            menu.classList.toggle('show');

            const hamburgerIcon = document.querySelector('.hamburger-menu i');
            if (menu.classList.contains('show')) {
                hamburgerIcon.className = 'fas fa-times';
            } else {
                hamburgerIcon.className = 'fas fa-bars';
            }
        }

        function showPage(pageId) {
            const pages = document.querySelectorAll('.page');
            const navLinks = document.querySelectorAll('.nav-link');

            pages.forEach(page => {
                page.classList.remove('active');
                page.setAttribute('hidden', 'true');
            });

            const activePage = document.getElementById(pageId);
            if (activePage) {
                activePage.classList.add('active');
                activePage.removeAttribute('hidden');
            }

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('data-page') === pageId) {
                    link.classList.add('active');
                }
            });

            const menu = document.querySelector('.nav-menu');
            if (menu && menu.classList.contains('show')) {
                toggleMenu();
            }

            window.scrollTo(0, 0);

            const pageTitles = {
                'home': 'Home',
                'ai-assistant': 'AI Assistant',
                'process-guide': 'Process Guide',
                'token-system': 'Smart Token',
                'schemes': 'Schemes & Services',
                'accessibility': 'Language & Accessibility'
            };
            document.title = `Jan Seva Saathi - ${pageTitles[pageId] || pageId}`;
        }

        let conversationContext = {
            lastQuery: '',
            lastService: '',
            lastDecision: '',
            history: []
        };

        function updateContext(userQuery, serviceType, detectedService) {
            conversationContext.lastQuery = userQuery;
            conversationContext.lastService = detectedService;
            conversationContext.lastDecision = serviceType;
            conversationContext.history.push({
                query: userQuery,
                service: detectedService,
                decision: serviceType,
                timestamp: new Date().toISOString()
            });

            if (conversationContext.history.length > 5) {
                conversationContext.history.shift();
            }
        }

        function updateAIResponseCards(serviceType, detectedService) {
            const onlineCard = document.getElementById('onlineCard');
            const offlineCard = document.getElementById('offlineCard');

            if (!onlineCard || !offlineCard) return;

            onlineCard.style.display = 'block';
            offlineCard.style.display = 'block';

            document.querySelectorAll('.ai-badge').forEach(badge => badge.remove());

            if (serviceType === 'online') {
                offlineCard.style.display = 'none';
                const badge = document.createElement('span');
                badge.className = 'ai-badge';
                badge.innerHTML = '✅ <strong>AI RECOMMENDED</strong> - Fastest Option';
                onlineCard.querySelector('.response-header').appendChild(badge);

            } else if (serviceType === 'offline') {
                onlineCard.style.display = 'none';
                const badge = document.createElement('span');
                badge.className = 'ai-badge';
                badge.innerHTML = '🏛️ <strong>OFFICE VISIT REQUIRED</strong>';
                offlineCard.querySelector('.response-header').appendChild(badge);

            } else if (serviceType === 'hybrid') {
                const badge = document.createElement('span');
                badge.className = 'ai-badge';
                badge.innerHTML = '⚡ <strong>HYBRID PROCESS</strong>';

                onlineCard.querySelector('.response-header').appendChild(badge.cloneNode(true));
                offlineCard.querySelector('.response-header').appendChild(badge.cloneNode(true));
            }
        }

        function showFeedbackModal() {
            const feedbackModal = document.getElementById('feedbackModal');
            if (feedbackModal) {
                feedbackModal.style.display = 'flex';
            }
        }

        function closeFeedbackModal() {
            const feedbackModal = document.getElementById('feedbackModal');
            if (feedbackModal) {
                feedbackModal.style.display = 'none';
            }
        }

        function setRating(rating) {
            const buttons = document.querySelectorAll('#feedbackModal .btn-action');
            buttons.forEach((btn, index) => {
                if (index < rating) {
                    btn.style.background = 'var(--accent-gold)';
                    btn.style.color = 'var(--text-dark)';
                } else {
                    btn.style.background = '';
                    btn.style.color = '';
                }
            });
        }

        function submitFeedback() {
            const feedback = document.getElementById('feedbackText');
            if (!feedback || !feedback.value.trim()) {
                showToast('Please enter your feedback', 'warning');
                return;
            }

            const submitBtn = document.querySelector('#feedbackModal .btn-action');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<span class="loading-spinner"></span> Submitting...';
            submitBtn.disabled = true;

            setTimeout(() => {
                showToast('Thank you for your feedback! We will use it to improve our services.', 'success');
                closeFeedbackModal();
                document.getElementById('feedbackText').value = '';

                const buttons = document.querySelectorAll('#feedbackModal .btn-action');
                buttons.forEach(btn => {
                    btn.style.background = '';
                    btn.style.color = '';
                });

                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }, 1500);
        }

        function setupEventListeners() {
            const voiceInputBtn = document.getElementById('voiceInputBtn');
            if (voiceInputBtn) {
                voiceInputBtn.addEventListener('click', toggleVoiceInput);
            }

            const sendTextButton = document.getElementById('sendTextButton');
            if (sendTextButton) {
                sendTextButton.addEventListener('click', function () {
                    const textInputArea = document.getElementById('textInputArea');
                    const query = textInputArea ? textInputArea.value.trim() : '';
                    if (query) {
                        processUserQuery(query);
                    } else {
                        showToast('Please enter a query or use voice input', 'warning');
                    }
                });
            }

            const onlineSpeakBtn = document.getElementById('onlineSpeakBtn');
            if (onlineSpeakBtn) {
                onlineSpeakBtn.addEventListener('click', function () {
                    const responseContent = document.getElementById('aiResponseContent');
                    const responseText = responseContent ? responseContent.textContent : '';
                    const currentLang = localStorage.getItem('janSevaLanguage') || 'hi';
                    speakText(responseText, currentLang);
                });
            }

            const offlineSpeakBtn = document.getElementById('offlineSpeakBtn');
            if (offlineSpeakBtn) {
                offlineSpeakBtn.addEventListener('click', function () {
                    const responseContent = document.getElementById('aiResponseContent');
                    const responseText = responseContent ? responseContent.textContent : '';
                    const currentLang = localStorage.getItem('janSevaLanguage') || 'hi';
                    speakText(responseText, currentLang);
                });
            }

            const generateTokenBtn = document.getElementById('generateTokenBtn');
            if (generateTokenBtn) {
                generateTokenBtn.addEventListener('click', function () {
                    const textInputArea = document.getElementById('textInputArea');
                    const userQuery = textInputArea ? textInputArea.value || 'Government Service Request' : 'Government Service Request';
                    const { serviceType, detectedService } = determineServicePath(userQuery);
                    const tokenData = generateSmartToken(serviceType, userQuery);
                    navigateToTokenPage(tokenData);
                });
            }

            const checkEligibilityBtn = document.getElementById('checkEligibilityBtn');
            if (checkEligibilityBtn) {
                checkEligibilityBtn.addEventListener('click', checkEligibility);
            }

            const voiceProfileBtn = document.getElementById('voiceProfileBtn');
            if (voiceProfileBtn) {
                voiceProfileBtn.addEventListener('click', function () {
                    showPage('ai-assistant');
                    setTimeout(() => {
                        const voiceInputBtn = document.getElementById('voiceInputBtn');
                        if (voiceInputBtn) {
                            voiceInputBtn.click();
                        }
                    }, 500);
                });
            }

            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    const pageId = this.getAttribute('data-page');
                    showPage(pageId);
                });
            });

            const talkToAI = document.getElementById('talkToAI');
            if (talkToAI) {
                talkToAI.addEventListener('click', function () {
                    showPage('ai-assistant');
                    const voiceInputBtn = document.getElementById('voiceInputBtn');
                    if (voiceInputBtn) {
                        voiceInputBtn.focus();
                    }
                });
            }

            const startWithText = document.getElementById('startWithText');
            if (startWithText) {
                startWithText.addEventListener('click', function () {
                    showPage('ai-assistant');
                    const textInputArea = document.getElementById('textInputArea');
                    if (textInputArea) {
                        textInputArea.focus();
                    }
                });
            }

            const downloadTokenBtn = document.getElementById('downloadTokenBtnLandscape');
            if (downloadTokenBtn) {
                downloadTokenBtn.addEventListener('click', function () {
                    showToast('Token downloaded as PDF. Check your downloads folder.', 'success');
                });
            }

            const saveTokenBtn = document.getElementById('saveTokenBtnLandscape');
            if (saveTokenBtn) {
                saveTokenBtn.addEventListener('click', function () {
                    showToast('Token saved to your device. You can now show it at the office.', 'success');
                });
            }

            const simpleModeToggle = document.getElementById('simpleModeToggle');
            if (simpleModeToggle) {
                simpleModeToggle.addEventListener('change', function () {
                    if (this.checked) {
                        document.body.classList.add('simple-mode');
                        showToast('Simple mode enabled with larger text and buttons', 'success');
                    } else {
                        document.body.classList.remove('simple-mode');
                        showToast('Simple mode disabled', 'success');
                    }
                });
            }

            const listenToAI = document.getElementById('listenToAI');
            if (listenToAI) {
                listenToAI.addEventListener('click', function () {
                    const responseContent = document.getElementById('aiResponseContent');
                    const responseText = responseContent ? responseContent.textContent : '';
                    const currentLang = localStorage.getItem('janSevaLanguage') || 'hi';
                    speakText(responseText, currentLang);
                });
            }

            const speakInstead = document.getElementById('speakInstead');
            if (speakInstead) {
                speakInstead.addEventListener('click', function () {
                    showPage('ai-assistant');
                    setTimeout(() => {
                        const voiceInputBtn = document.getElementById('voiceInputBtn');
                        if (voiceInputBtn) {
                            voiceInputBtn.click();
                        }
                    }, 500);
                });
            }

            const themeToggle = document.getElementById('themeToggle');
            if (themeToggle) {
                themeToggle.addEventListener('change', function () {
                    toggleTheme();
                });
            }

            document.addEventListener('keydown', function (e) {
                if (e.ctrlKey && e.shiftKey && e.key === 'A') {
                    e.preventDefault();
                    showPage('accessibility');
                }

                if (e.key === 'Escape') {
                    const modals = document.querySelectorAll('.modal-overlay');
                    modals.forEach(modal => {
                        if (modal.style.display === 'flex') {
                            modal.style.display = 'none';
                        }
                    });
                }
            });

            // Feature cards navigation
            document.querySelectorAll('.feature-card').forEach(card => {
                card.addEventListener('click', function (e) {
                    if (!e.target.classList.contains('feature-btn')) {
                        const text = this.querySelector('h3').textContent.toLowerCase();
                        if (text.includes('ai assistant')) {
                            showPage('ai-assistant');
                        } else if (text.includes('token')) {
                            showPage('token-system');
                        } else if (text.includes('schemes')) {
                            showPage('schemes');
                        } else if (text.includes('guide')) {
                            showPage('process-guide');
                        }
                    }
                });
            });
        }

        function speakText(text, langCode = 'hi') {
            if (!speechSynthesis || isSpeaking) {
                return false;
            }

            const langMap = {
                'hi': 'hi-IN',
                'en': 'en-US',
                'mr': 'mr-IN',
                'te': 'te-IN'
            };

            speechSynthesis.cancel();

            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = langMap[langCode] || 'en-US';
            utterance.rate = 0.9;
            utterance.pitch = 1.0;
            utterance.volume = 1.0;

            const voices = speechSynthesis.getVoices();
            const preferredVoice = voices.find(voice =>
                voice.lang.startsWith(langCode) || voice.lang.includes(langCode)
            );

            if (preferredVoice) {
                utterance.voice = preferredVoice;
            }

            utterance.onstart = function () {
                isSpeaking = true;
                document.querySelectorAll('.response-speak-btn').forEach(btn => {
                    btn.classList.add('speaking');
                    btn.innerHTML = '<i class="fas fa-stop"></i>';
                });
            };

            utterance.onend = function () {
                isSpeaking = false;
                document.querySelectorAll('.response-speak-btn').forEach(btn => {
                    btn.classList.remove('speaking');
                    btn.innerHTML = '<i class="fas fa-volume-up"></i>';
                });
            };

            utterance.onerror = function (event) {
                isSpeaking = false;
                document.querySelectorAll('.response-speak-btn').forEach(btn => {
                    btn.classList.remove('speaking');
                    btn.innerHTML = '<i class="fas fa-volume-up"></i>';
                });
                showToast('Could not read text aloud. Please try again.', 'error');
            };

            speechSynthesis.speak(utterance);
            return true;
        }

        function loadSavedData() {
            const savedTheme = localStorage.getItem('janSevaTheme') || 'light';
            setTheme(savedTheme);

            const savedLang = localStorage.getItem('janSevaLanguage') || 'hi';
            changeLanguage(savedLang);

            const savedAutoRead = localStorage.getItem('janSevaAutoRead');
            if (savedAutoRead !== null) {
                autoReadEnabled = savedAutoRead === 'true';
            }
        }

        function generateSmartToken(serviceType, userQuery) {
            const tokenNumber = 'JS-' + Math.floor(1000 + Math.random() * 9000);
            const offices = [
                'Tehsil Office, Raipur',
                'Municipal Corporation, Delhi',
                'District Collectorate, Mumbai',
                'CSC Center, Bangalore',
                'Gram Panchayat Office, Pune'
            ];
            const times = ['9:30 AM', '11:00 AM', '2:15 PM', '3:45 PM', '4:30 PM'];
            const crowds = ['🟢 Low Crowd', '🟡 Medium Crowd', '🔴 High Crowd'];

            return {
                tokenNumber: tokenNumber,
                office: offices[Math.floor(Math.random() * offices.length)],
                timeSlot: times[Math.floor(Math.random() * times.length)],
                crowdStatus: crowds[Math.floor(Math.random() * crowds.length)],
                service: userQuery.substring(0, 30) + (userQuery.length > 30 ? '...' : ''),
                date: new Date().toLocaleDateString('en-IN', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                }),
                estimatedWait: Math.floor(Math.random() * 30) + 5 + ' minutes',
                validity: '30 minutes from scheduled time'
            };
        }

        function navigateToTokenPage(tokenData) {
            showPage('token-system');

            setTimeout(() => {
                updateLandscapeTokenCard(tokenData);
                showToast('Smart token generated successfully!', 'success');
            }, 500);
        }

        // Make functions available globally
        window.JanSevaAI = {
            toggleVoiceInput,
            speakText,
            stopSpeech: readingManager.stopReading.bind(readingManager),
            checkEligibility,
            processUserQuery,
            showPage,
            showToast,
            toggleTheme,
            changeLanguage
        };

        // Initialize sample active tokens
        setTimeout(() => {
            const activeTokensGrid = document.getElementById('activeTokensGrid');
            if (activeTokensGrid && activeTokensGrid.children.length === 0) {
                const sampleTokens = [
                    {
                        tokenNumber: 'JS-1023',
                        service: 'Birth Certificate',
                        crowdStatus: '🟢 Low Crowd',
                        office: 'Municipal Corporation, Delhi',
                        date: '12 March 2024',
                        timeSlot: '10:00 AM – 10:30 AM',
                        estimatedWait: '5-10 minutes'
                    },
                    {
                        tokenNumber: 'JS-9876',
                        service: 'Income Certificate',
                        crowdStatus: '🟡 Medium Crowd',
                        office: 'District Collectorate, Mumbai',
                        date: '14 March 2024',
                        timeSlot: '2:00 PM – 2:30 PM',
                        estimatedWait: '15-20 minutes'
                    }
                ];

                sampleTokens.forEach(token => {
                    addToActiveTokens(token);
                });
            }
        }, 1000);
        // Scheme detail modal - COMPLETE FIXED VERSION
        function showSchemeDetail(schemeKey) {
            // Complete scheme data for all 6 categories
            const schemeDetails = {
                health: {
                    title: 'Health Schemes',
                    description: 'Various health insurance and medical assistance schemes provided by central and state governments.',
                    schemes: [
                        'Ayushman Bharat - ₹5 lakh health insurance per family per year',
                        'PM Jan Arogya Yojana - Cashless treatment in empaneled hospitals',
                        'Rashtriya Swasthya Bima Yojana - Health insurance for BPL families',
                        'State Health Schemes - Varies by state, check with local authorities',
                        'Maternal Health Schemes - For pregnant women and new mothers'
                    ],
                    eligibility: 'Based on income, family size, age, and medical requirements. Ayushman Bharat covers families listed in SECC database.',
                    documents: ['Aadhaar Card', 'Income Certificate', 'Ration Card', 'Bank Account', 'Family Details'],
                    benefits: 'Free hospitalization, cashless treatment, medicine subsidies, maternity benefits',
                    applyLink: 'https://pmjay.gov.in',
                    helpContact: '104 or 1800-111-565'
                },
                education: {
                    title: 'Education Schemes',
                    description: 'Scholarships, mid-day meals, and educational support for students from various backgrounds.',
                    schemes: [
                        'Post-Matric Scholarship for SC/ST/OBC - For higher education',
                        'Mid-Day Meal Scheme - Free meals for school students',
                        'Free Textbook Distribution - For government school students',
                        'National Means-cum-Merit Scholarship - For economically weaker students',
                        'PM Scholarship Scheme for RPF/RPSF - For wards of railway personnel'
                    ],
                    eligibility: 'Based on caste, income, academic performance, and family background.',
                    documents: ['Caste Certificate', 'Income Certificate', 'Marksheet', 'Bank Account', 'School/College ID'],
                    benefits: 'Tuition fee waiver, scholarship amount, free books and uniforms, meal allowance',
                    applyLink: 'https://scholarships.gov.in',
                    helpContact: '1800-11-2088'
                },
                pension: {
                    title: 'Pension Schemes',
                    description: 'Financial assistance for senior citizens, widows, and disabled persons.',
                    schemes: [
                        'Indira Gandhi National Old Age Pension - ₹300-1000 per month for 60+',
                        'National Widow Pension Scheme - For widows aged 40-59',
                        'National Disability Pension Scheme - For persons with 80%+ disability',
                        'Atal Pension Yojana - Contributory pension scheme',
                        'Pradhan Mantri Vaya Vandana Yojana - For senior citizens'
                    ],
                    eligibility: 'Age 60+ for old age, 40-59 for widow, 18+ with disability, BPL category',
                    documents: ['Aadhaar Card', 'Age Proof', 'Income Certificate', 'Disability Certificate', 'Bank Account', 'Death Certificate (for widow)'],
                    benefits: 'Monthly pension, life insurance, accidental death benefit, disability cover',
                    applyLink: 'https://nsap.nic.in',
                    helpContact: '1800-11-2377'
                },
                ration: {
                    title: 'Ration & Food Security',
                    description: 'Food grains at subsidized rates through Public Distribution System.',
                    schemes: [
                        'National Food Security Act (NFSA) - 5kg food grains per person per month',
                        'PM Garib Kalyan Anna Yojana - Additional 5kg food grains free',
                        'One Nation One Ration Card - Portable ration card across India',
                        'Antyodaya Anna Yojana - 35kg food grains for poorest families',
                        'Mid-Day Meal Scheme - For school children'
                    ],
                    eligibility: 'Based on income, family size, and priority household status',
                    documents: ['Aadhaar Card', 'Address Proof', 'Income Certificate', 'Family Ration Card', 'Bank Account'],
                    benefits: 'Subsidized wheat/rice/sugar, free food grains during pandemic, portable benefits',
                    applyLink: 'https://nfsa.gov.in',
                    helpContact: '1967 or 1800-11-1260'
                },
                certificates: {
                    title: 'Certificates & Documents',
                    description: 'Various certificates required for availing government schemes and services.',
                    schemes: [
                        'Birth & Death Certificate - Mandatory registration within 21 days',
                        'Income Certificate - Proof of annual family income',
                        'Caste Certificate - For SC/ST/OBC categories',
                        'Domicile Certificate - Proof of residence in state',
                        'Marriage Certificate - Legal proof of marriage'
                    ],
                    eligibility: 'All citizens requiring official documents based on actual facts',
                    documents: ['Aadhaar Card', 'Proof of Birth/Event', 'Address Proof', 'Affidavits', 'Witness Proof', 'Parent/Guardian Documents'],
                    benefits: 'Access to government schemes, legal recognition, proof of identity/status',
                    applyLink: 'https://services.india.gov.in',
                    helpContact: '1075 or local municipal office'
                },
                employment: {
                    title: 'Employment & Skill Development',
                    description: 'Job guarantee, skill training, and entrepreneurship support schemes.',
                    schemes: [
                        'Mahatma Gandhi NREGA - 100 days guaranteed employment per year',
                        'PM Kaushal Vikas Yojana - Skill training with certification',
                        'Startup India - Entrepreneurship support and funding',
                        'PM Employment Generation Programme - Subsidy for self-employment',
                        'Deen Dayal Upadhyaya Grameen Kaushalya Yojana - Rural skill development'
                    ],
                    eligibility: 'Based on age, education, employment status, and economic background',
                    documents: ['Aadhaar Card', 'Educational Certificates', 'PAN Card', 'Business Proof', 'Bank Account', 'Address Proof'],
                    benefits: 'Guaranteed employment, skill training, startup funding, interest subsidy',
                    applyLink: 'https://www.mgnrega.nic.in',
                    helpContact: '1800-345-5555'
                }
            };

            const detail = schemeDetails[schemeKey];
            if (!detail) {
                showToast('Scheme details not available at the moment', 'warning');
                return;
            }

            const modalContent = `
        <div class="modal-content">
            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px;">
                <h2 style="color: var(--primary-blue); margin: 0;">
                    <i class="fas fa-info-circle"></i> ${detail.title}
                </h2>
                <button onclick="document.querySelector('.modal-overlay').style.display = 'none'" 
                        style="background: none; border: none; font-size: 24px; color: var(--dark-gray); cursor: pointer;">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <p style="margin-bottom: 20px; color: var(--dark-gray); padding: 15px; background: rgba(45, 74, 138, 0.05); border-radius: 10px;">
                ${detail.description}
            </p>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                <div>
                    <h4 style="color: var(--secondary-blue); margin-bottom: 10px;">
                        <i class="fas fa-list-check"></i> Available Schemes:
                    </h4>
                    <ul style="margin: 0; padding-left: 20px; color: var(--dark-gray);">
                        ${detail.schemes.map(scheme => `<li style="margin-bottom: 8px;">${scheme}</li>`).join('')}
                    </ul>
                </div>
                
                <div>
                    <h4 style="color: var(--secondary-blue); margin-bottom: 10px;">
                        <i class="fas fa-file-alt"></i> Required Documents:
                    </h4>
                    <div class="documents-list" style="margin-bottom: 15px;">
                        ${detail.documents.map(doc => `<div class="doc-tag" style="margin-bottom: 5px;">${doc}</div>`).join('')}
                    </div>
                </div>
            </div>
            
            <div style="background: rgba(46, 125, 50, 0.1); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                <h4 style="color: var(--govt-green); margin-bottom: 8px;">
                    <i class="fas fa-check-circle"></i> Eligibility Criteria:
                </h4>
                <p style="color: var(--dark-gray); margin: 0;">${detail.eligibility}</p>
            </div>
            
            <div style="background: rgba(212, 175, 55, 0.1); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                <h4 style="color: var(--accent-gold); margin-bottom: 8px;">
                    <i class="fas fa-gift"></i> Benefits:
                </h4>
                <p style="color: var(--dark-gray); margin: 0;">${detail.benefits}</p>
            </div>
            
            <div style="display: flex; gap: 15px; margin-bottom: 20px;">
                <div style="flex: 1; background: rgba(45, 74, 138, 0.1); padding: 15px; border-radius: 10px;">
                    <h5 style="color: var(--secondary-blue); margin-bottom: 5px;">
                        <i class="fas fa-external-link-alt"></i> Apply Online:
                    </h5>
                    <a href="${detail.applyLink}" target="_blank" 
                       style="color: var(--govt-green); font-weight: 600; text-decoration: none;">
                        ${detail.applyLink.replace('https://', '')}
                    </a>
                </div>
                
                <div style="flex: 1; background: rgba(198, 40, 40, 0.1); padding: 15px; border-radius: 10px;">
                    <h5 style="color: var(--govt-red); margin-bottom: 5px;">
                        <i class="fas fa-phone-alt"></i> Help & Support:
                    </h5>
                    <p style="color: var(--dark-gray); margin: 0; font-weight: 600;">${detail.helpContact}</p>
                </div>
            </div>
            
            <div class="response-actions" style="margin-top: 20px;">
                <button class="btn-action btn-send" onclick="showPage('ai-assistant')" style="flex: 1;">
                    <i class="fas fa-robot"></i> Ask AI Assistant
                </button>
                <button class="btn-action btn-speak" onclick="checkEligibilityForScheme('${schemeKey}')" style="flex: 1;">
                    <i class="fas fa-calculator"></i> Check Eligibility
                </button>
                <button class="btn-action" onclick="document.querySelector('.modal-overlay').style.display = 'none'" 
                        style="background: var(--dark-gray); color: white; flex: 0.5;">
                    <i class="fas fa-times"></i> Close
                </button>
            </div>
        </div>
    `;

            // Create or update modal
            let modal = document.querySelector('.modal-overlay:not(#feedbackModal)');
            if (!modal) {
                modal = document.createElement('div');
                modal.className = 'modal-overlay';
                modal.onclick = function (e) {
                    if (e.target === modal) {
                        modal.style.display = 'none';
                    }
                };
                document.body.appendChild(modal);
            }

            modal.innerHTML = modalContent;
            modal.style.display = 'flex';
        }

        // New function to check eligibility for specific scheme
        function checkEligibilityForScheme(schemeKey) {
            // Close modal first
            document.querySelector('.modal-overlay').style.display = 'none';

            // Navigate to schemes page
            showPage('schemes');

            // Show eligibility checker section
            setTimeout(() => {
                // Scroll to eligibility section
                document.querySelector('.eligibility-checker').scrollIntoView({ behavior: 'smooth' });

                // Show toast message
                showToast(`Now you can check eligibility for ${schemeKey} schemes`, 'success');

                // Optional: Pre-fill based on scheme
                const schemePrefills = {
                    'pension': { age: '60', income: 'low' },
                    'ration': { income: 'low' },
                    'education': { category: 'sc' },
                    'health': { income: 'medium' },
                    'employment': { age: '25' },
                    'certificates': {}
                };

                const prefill = schemePrefills[schemeKey];
                if (prefill) {
                    if (prefill.age) document.getElementById('ageInput').value = prefill.age;
                    if (prefill.income) document.getElementById('incomeInput').value = prefill.income;
                    if (prefill.category) document.getElementById('categoryInput').value = prefill.category;
                }
            }, 300);
        }
    </script>
</body>

</html>
